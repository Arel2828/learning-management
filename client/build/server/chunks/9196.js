exports.id=9196,exports.ids=[9196],exports.modules={35225:(e,t,r)=>{"use strict";let i;r.d(t,{Z:()=>p});let a=e=>/^image\/jpeg/.test(e.type),l={JPEG:65496,APP1:65505,EXIF:0x45786966,TIFF:18761,Orientation:274,Unknown:65280},n=(e,t,r=!1)=>e.getUint16(t,r),s=(e,t,r=!1)=>e.getUint32(t,r),o=e=>new Promise((t,r)=>{let i=new FileReader;i.onload=function(e){let r=new DataView(e.target.result);if(n(r,0)!==l.JPEG){t(-1);return}let i=r.byteLength,a=2;for(;a<i;){let e=n(r,a);if(a+=2,e===l.APP1){if(s(r,a+=2)!==l.EXIF)break;let e=n(r,a+=6)===l.TIFF;a+=s(r,a+4,e);let i=n(r,a,e);a+=2;for(let s=0;s<i;s++)if(n(r,a+12*s,e)===l.Orientation){t(n(r,a+12*s+8,e));return}}else if((e&l.Unknown)!==l.Unknown)break;else a+=n(r,a)}t(-1)},i.readAsArrayBuffer(e.slice(0,65536))}),d="undefined"!=typeof window&&void 0!==window.document?new Image:{};d.onload=()=>i=d.naturalWidth>d.naturalHeight,d.src="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let u=()=>i,c=({addFilter:e,utils:t})=>{let{Type:r,isFile:i}=t;return e("DID_LOAD_ITEM",(e,{query:t})=>new Promise((r,l)=>{let n=e.file;if(!i(n)||!a(n)||!t("GET_ALLOW_IMAGE_EXIF_ORIENTATION")||!u())return r(e);o(n).then(t=>{e.setMetadata("exif",{orientation:t}),r(e)})})),{options:{allowImageExifOrientation:[!0,r.BOOLEAN]}}};"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:c}));let p=c},2666:(e,t,r)=>{"use strict";r.d(t,{Z:()=>es});let i=e=>/^image/.test(e.type),a=(e,t)=>o(e.x*t,e.y*t),l=(e,t)=>o(e.x+t.x,e.y+t.y),n=e=>{let t=Math.sqrt(e.x*e.x+e.y*e.y);return 0===t?{x:0,y:0}:o(e.x/t,e.y/t)},s=(e,t,r)=>{let i=Math.cos(t),a=Math.sin(t),l=o(e.x-r.x,e.y-r.y);return o(r.x+i*l.x-a*l.y,r.y+a*l.x+i*l.y)},o=(e=0,t=0)=>({x:e,y:t}),d=(e,t,r=1,i)=>"string"==typeof e?parseFloat(e)*r:"number"==typeof e?e*(i?t[i]:Math.min(t.width,t.height)):void 0,u=(e,t,r)=>{let i=e.borderStyle||e.lineStyle||"solid",a=e.backgroundColor||e.fontColor||"transparent",l=e.borderColor||e.lineColor||"transparent",n=d(e.borderWidth||e.lineWidth,t,r),s=e.lineCap||"round";return{"stroke-linecap":s,"stroke-linejoin":e.lineJoin||"round","stroke-width":n||0,"stroke-dasharray":"string"==typeof i?"":i.map(e=>d(e,t,r)).join(","),stroke:l,fill:a,opacity:e.opacity||1}},c=e=>null!=e,p=(e,t,r=1)=>{let i=d(e.x,t,r,"width")||d(e.left,t,r,"width"),a=d(e.y,t,r,"height")||d(e.top,t,r,"height"),l=d(e.width,t,r,"width"),n=d(e.height,t,r,"height"),s=d(e.right,t,r,"width"),o=d(e.bottom,t,r,"height");return c(a)||(a=c(n)&&c(o)?t.height-n-o:o),c(i)||(i=c(l)&&c(s)?t.width-l-s:s),c(l)||(l=c(i)&&c(s)?t.width-i-s:0),c(n)||(n=c(a)&&c(o)?t.height-a-o:0),{x:i||0,y:a||0,width:l||0,height:n||0}},f=e=>e.map((e,t)=>`${0===t?"M":"L"} ${e.x} ${e.y}`).join(" "),E=(e,t)=>Object.keys(t).forEach(r=>e.setAttribute(r,t[r])),_=(e,t)=>{let r=document.createElementNS("http://www.w3.org/2000/svg",e);return t&&E(r,t),r},m={contain:"xMidYMid meet",cover:"xMidYMid slice"},h={left:"start",center:"middle",right:"end"},I=e=>t=>_(e,{id:t.id}),T={image:e=>{let t=_("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},rect:I("rect"),ellipse:I("ellipse"),text:I("text"),path:I("path"),line:e=>{let t=_("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),r=_("line");t.appendChild(r);let i=_("path");t.appendChild(i);let a=_("path");return t.appendChild(a),t}},g={rect:e=>E(e,{...e.rect,...e.styles}),ellipse:e=>{let t=e.rect.x+.5*e.rect.width,r=e.rect.y+.5*e.rect.height,i=.5*e.rect.width,a=.5*e.rect.height;return E(e,{cx:t,cy:r,rx:i,ry:a,...e.styles})},image:(e,t)=>{E(e,{...e.rect,...e.styles,preserveAspectRatio:m[t.fit]||"none"})},text:(e,t,r,i)=>{let a=d(t.fontSize,r,i),l=t.fontFamily||"sans-serif",n=t.fontWeight||"normal",s=h[t.textAlign]||"start";E(e,{...e.rect,...e.styles,"stroke-width":0,"font-weight":n,"font-size":a,"font-family":l,"text-anchor":s}),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},path:(e,t,r,i)=>{E(e,{...e.styles,fill:"none",d:f(t.points.map(e=>({x:d(e.x,r,i,"width"),y:d(e.y,r,i,"height")})))})},line:(e,t,r,i)=>{E(e,{...e.rect,...e.styles,fill:"none"});let o=e.childNodes[0],u=e.childNodes[1],c=e.childNodes[2],p=e.rect,f={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(E(o,{x1:p.x,y1:p.y,x2:f.x,y2:f.y}),!t.lineDecoration)return;u.style.display="none",c.style.display="none";let _=n({x:f.x-p.x,y:f.y-p.y}),m=d(.05,r,i);if(-1!==t.lineDecoration.indexOf("arrow-begin")){let e=l(p,a(_,m)),t=s(p,2,e),r=s(p,-2,e);E(u,{style:"display:block;",d:`M${t.x},${t.y} L${p.x},${p.y} L${r.x},${r.y}`})}if(-1!==t.lineDecoration.indexOf("arrow-end")){let e=l(f,a(_,-m)),t=s(f,2,e),r=s(f,-2,e);E(c,{style:"display:block;",d:`M${t.x},${t.y} L${f.x},${f.y} L${r.x},${r.y}`})}}},y=(e,t)=>T[e](t),R=(e,t,r,i,a)=>{"path"!==t&&(e.rect=p(r,i,a)),e.styles=u(r,i,a),g[t](e,r,i,a)},A=["x","y","left","top","right","bottom","width","height"],O=e=>"string"==typeof e&&/%/.test(e)?parseFloat(e)/100:e,D=e=>{let[t,r]=e,i=r.points?{}:A.reduce((e,t)=>(e[t]=O(r[t]),e),{});return[t,{zIndex:0,...r,...i}]},S=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,v=e=>e.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:e,props:t})=>{if(!t.dirty)return;let{crop:r,resize:i,markup:a}=t,l=t.width,n=t.height,s=r.width,o=r.height;if(i){let{size:e}=i,t=e&&e.width,r=e&&e.height,a=i.mode,l=i.upscale;t&&!r&&(r=t),r&&!t&&(t=r);let n=s<t&&o<r;if(!n||n&&l){let e=t/s,i=r/o;if("force"===a)s=t,o=r;else{let t;"cover"===a?t=Math.max(e,i):"contain"===a&&(t=Math.min(e,i)),s*=t,o*=t}}}let d={width:l,height:n};e.element.setAttribute("width",d.width),e.element.setAttribute("height",d.height);let u=Math.min(l/s,n/o);e.element.innerHTML="";let c=e.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");a.filter(c).map(D).sort(S).forEach(t=>{let[r,i]=t,a=y(r,i);R(a,r,i,d,u),e.element.appendChild(a)})}}),w=(e,t)=>({x:e,y:t}),b=(e,t)=>e.x*t.x+e.y*t.y,M=(e,t)=>w(e.x-t.x,e.y-t.y),L=(e,t)=>b(M(e,t),M(e,t)),P=(e,t)=>Math.sqrt(L(e,t)),C=(e,t)=>{let r=1.5707963267948966-t,i=Math.sin(r),a=Math.cos(r),l=e/1;return w(l*Math.sin(t)*a,l*i*a)},N=(e,t)=>{let r=e.width,i=e.height,a=C(r,t),l=C(i,t),n=w(e.x+Math.abs(a.x),e.y-Math.abs(a.y)),s=w(e.x+e.width+Math.abs(l.y),e.y+Math.abs(l.x)),o=w(e.x-Math.abs(l.y),e.y+e.height-Math.abs(l.x));return{width:P(n,s),height:P(n,o)}},G=(e,t,r=1)=>{let i=e.height/e.width,a=1,l=i;l>t&&(a=(l=t)/i);let n=Math.max(1/a,t/l),s=e.width/(r*n*a);return{width:s,height:s*t}},x=(e,t,r,i)=>{let a=i.x>.5?1-i.x:i.x,l=i.y>.5?1-i.y:i.y,n=2*a*e.width,s=2*l*e.height,o=N(t,r);return Math.max(o.width/n,o.height/s)},V=(e,t)=>{let r=e.width,i=r*t;return i>e.height&&(r=(i=e.height)/t),{x:(e.width-r)*.5,y:(e.height-i)*.5,width:r,height:i}},U=(e,t={})=>{let{zoom:r,rotation:i,center:a,aspectRatio:l}=t;l||(l=e.height/e.width);let n=G(e,l,r),s={x:.5*n.width,y:.5*n.height},o={x:0,y:0,width:n.width,height:n.height,center:s},d=void 0===t.scaleToFit||t.scaleToFit,u=r*x(e,V(o,l),i,d?a:{x:.5,y:.5});return{widthFloat:n.width/u,heightFloat:n.height/u,width:Math.round(n.width/u),height:Math.round(n.height/u)}},F={type:"spring",stiffness:.5,damping:.45,mass:10},B=e=>e.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:e,props:t})=>{e.appendChild(t.image)}}),k=e=>e.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:F,originY:F,scaleX:F,scaleY:F,translateX:F,translateY:F,rotateZ:F}},create:({root:t,props:r})=>{r.width=r.image.width,r.height=r.image.height,t.ref.bitmap=t.appendChildView(t.createChildView(B(e),{image:r.image}))},write:({root:e,props:t})=>{let{flip:r}=t.crop,{bitmap:i}=e.ref;i.scaleX=r.horizontal?-1:1,i.scaleY=r.vertical?-1:1}}),q=e=>e.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:e,props:t}){t.background&&(e.element.style.backgroundColor=t.background)},create:({root:t,props:r})=>{t.ref.image=t.appendChildView(t.createChildView(k(e),Object.assign({},r))),t.ref.createMarkup=()=>{t.ref.markup||(t.ref.markup=t.appendChildView(t.createChildView(v(e),Object.assign({},r))))},t.ref.destroyMarkup=()=>{t.ref.markup&&(t.removeChildView(t.ref.markup),t.ref.markup=null)};let i=t.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");null!==i&&("grid"===i?t.element.dataset.transparencyIndicator=i:t.element.dataset.transparencyIndicator="color")},write:({root:e,props:t,shouldOptimize:r})=>{let{crop:i,markup:a,resize:l,dirty:n,width:s,height:o}=t;e.ref.image.crop=i;let d={x:0,y:0,width:s,height:o,center:{x:.5*s,y:.5*o}},u={width:e.ref.image.width,height:e.ref.image.height},c={x:i.center.x*u.width,y:i.center.y*u.height},p={x:d.center.x-u.width*i.center.x,y:d.center.y-u.height*i.center.y},f=2*Math.PI+i.rotation%(2*Math.PI),E=i.aspectRatio||u.height/u.width,_=void 0===i.scaleToFit||i.scaleToFit,m=x(u,V(d,E),f,_?i.center:{x:.5,y:.5}),h=i.zoom*m;a&&a.length?(e.ref.createMarkup(),e.ref.markup.width=s,e.ref.markup.height=o,e.ref.markup.resize=l,e.ref.markup.dirty=n,e.ref.markup.markup=a,e.ref.markup.crop=U(u,i)):e.ref.markup&&e.ref.destroyMarkup();let I=e.ref.image;if(r){I.originX=null,I.originY=null,I.translateX=null,I.translateY=null,I.rotateZ=null,I.scaleX=null,I.scaleY=null;return}I.originX=c.x,I.originY=c.y,I.translateX=p.x,I.translateY=p.y,I.rotateZ=f,I.scaleX=h,I.scaleY=h}}),Y=e=>e.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:F,scaleY:F,translateY:F,opacity:{type:"tween",duration:400}}},create:({root:t,props:r})=>{t.ref.clip=t.appendChildView(t.createChildView(q(e),{id:r.id,image:r.image,crop:r.crop,markup:r.markup,resize:r.resize,dirty:r.dirty,background:r.background}))},write:({root:e,props:t,shouldOptimize:r})=>{let{clip:i}=e.ref,{image:a,crop:l,markup:n,resize:s,dirty:o}=t;if(i.crop=l,i.markup=n,i.resize=s,i.dirty=o,i.opacity=r?0:1,r||e.rect.element.hidden)return;let d=a.height/a.width,u=l.aspectRatio||d,c=e.rect.inner.width,p=e.rect.inner.height,f=e.query("GET_IMAGE_PREVIEW_HEIGHT"),E=e.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),_=e.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),m=e.query("GET_PANEL_ASPECT_RATIO"),h=e.query("GET_ALLOW_MULTIPLE");m&&!h&&(f=c*m,u=m);let I=null!==f?f:Math.max(E,Math.min(c*u,_)),T=I/u;T>c&&(I=(T=c)*u),I>p&&(I=p,T=p/u),i.width=T,i.height=I}}),W=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,H=0,X=e=>e.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:e,props:t})=>{let r=W;if(document.querySelector("base")){let e=new URL(window.location.href.replace(window.location.hash,"")).href;r=r.replace(/url\(\#/g,"url("+e+"#")}H++,e.element.classList.add(`filepond--image-preview-overlay-${t.status}`),e.element.innerHTML=r.replace(/__UID__/g,H)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),$=function(){self.onmessage=e=>{createImageBitmap(e.data.message.file).then(t=>{self.postMessage({id:e.data.id,message:t},[t])})}},j=function(){self.onmessage=e=>{let t=e.data.message.imageData,r=e.data.message.colorMatrix,i=t.data,a=i.length,l=r[0],n=r[1],s=r[2],o=r[3],d=r[4],u=r[5],c=r[6],p=r[7],f=r[8],E=r[9],_=r[10],m=r[11],h=r[12],I=r[13],T=r[14],g=r[15],y=r[16],R=r[17],A=r[18],O=r[19],D=0,S=0,v=0,w=0,b=0;for(;D<a;D+=4)S=i[D]/255,v=i[D+1]/255,w=i[D+2]/255,b=i[D+3]/255,i[D]=Math.max(0,Math.min((S*l+v*n+w*s+b*o+d)*255,255)),i[D+1]=Math.max(0,Math.min((S*u+v*c+w*p+b*f+E)*255,255)),i[D+2]=Math.max(0,Math.min((S*_+v*m+w*h+b*I+T)*255,255)),i[D+3]=Math.max(0,Math.min((S*g+v*y+w*R+b*A+O)*255,255));self.postMessage({id:e.data.id,message:t},[t.data.buffer])}},z=(e,t)=>{let r=new Image;r.onload=()=>{let e=r.naturalWidth,i=r.naturalHeight;r=null,t(e,i)},r.src=e},Q={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},Z=(e,t,r,i)=>{-1!==i&&e.transform.apply(e,Q[i](t,r))},K=(e,t,r,i)=>{t=Math.round(t),r=Math.round(r);let a=document.createElement("canvas");a.width=t,a.height=r;let l=a.getContext("2d");return i>=5&&i<=8&&([t,r]=[r,t]),Z(l,t,r,i),l.drawImage(e,0,0,t,r),a},J=e=>/^image/.test(e.type)&&!/svg/.test(e.type),ee=e=>{let t=Math.min(10/e.width,10/e.height),r=document.createElement("canvas"),i=r.getContext("2d"),a=r.width=Math.ceil(e.width*t),l=r.height=Math.ceil(e.height*t);i.drawImage(e,0,0,a,l);let n=null;try{n=i.getImageData(0,0,a,l).data}catch(e){return null}let s=n.length,o=0,d=0,u=0,c=0;for(;c<s;c+=4)o+=n[c]*n[c],d+=n[c+1]*n[c+1],u+=n[c+2]*n[c+2];return{r:o=et(o,s),g:d=et(d,s),b:u=et(u,s)}},et=(e,t)=>Math.floor(Math.sqrt(e/(t/4))),er=(e,t)=>((t=t||document.createElement("canvas")).width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t),ei=e=>{let t;try{t=new ImageData(e.width,e.height)}catch(r){t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(new Uint8ClampedArray(e.data)),t},ea=e=>new Promise((t,r)=>{let i=new Image;i.crossOrigin="Anonymous",i.onload=()=>{t(i)},i.onerror=e=>{r(e)},i.src=e}),el=e=>{let t=X(e),r=Y(e),{createWorker:i}=e.utils,a=(e,t,r)=>new Promise(a=>{e.ref.imageData||(e.ref.imageData=r.getContext("2d").getImageData(0,0,r.width,r.height));let l=ei(e.ref.imageData);if(!t||20!==t.length)return r.getContext("2d").putImageData(l,0,0),a();let n=i(j);n.post({imageData:l,colorMatrix:t},e=>{r.getContext("2d").putImageData(e,0,0),n.terminate(),a()},[l.data.buffer])}),l=(e,t)=>{e.removeChildView(t),t.image.width=1,t.image.height=1,t._destroy()},n=({root:e})=>{let t=e.ref.images.shift();return t.opacity=0,t.translateY=-15,e.ref.imageViewBin.push(t),t},s=({root:e,props:t,image:i})=>{let a,l;let n=t.id,s=e.query("GET_ITEM",{id:n});if(!s)return;let o=s.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},d=e.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),u=!1;e.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(a=s.getMetadata("markup")||[],l=s.getMetadata("resize"),u=!0);let c=e.appendChildView(e.createChildView(r,{id:n,image:i,crop:o,resize:l,markup:a,dirty:u,background:d,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),e.childViews.length);e.ref.images.push(c),c.opacity=1,c.scaleX=1,c.scaleY=1,c.translateY=0,setTimeout(()=>{e.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:n})},250)},o=({root:e,props:t})=>{let r=e.query("GET_ITEM",{id:t.id});if(!r)return;let i=e.ref.images[e.ref.images.length-1];i.crop=r.getMetadata("crop"),i.background=e.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),e.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(i.dirty=!0,i.resize=r.getMetadata("resize"),i.markup=r.getMetadata("markup"))},d=e=>{let t=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./),r=t?parseInt(t[1]):null;return(null===r||!(r<=58))&&"createImageBitmap"in window&&J(e)},u=({root:e})=>{e.ref.overlayShadow.opacity=1,e.ref.overlayError.opacity=0,e.ref.overlaySuccess.opacity=0},c=({root:e})=>{e.ref.overlayShadow.opacity=.25,e.ref.overlayError.opacity=1};return e.utils.createView({name:"image-preview-wrapper",create:({root:e})=>{e.ref.images=[],e.ref.imageData=null,e.ref.imageViewBin=[],e.ref.overlayShadow=e.appendChildView(e.createChildView(t,{opacity:0,status:"idle"})),e.ref.overlaySuccess=e.appendChildView(e.createChildView(t,{opacity:0,status:"success"})),e.ref.overlayError=e.appendChildView(e.createChildView(t,{opacity:0,status:"failure"}))},styles:["height"],apis:["height"],destroy:({root:e})=>{e.ref.images.forEach(e=>{e.image.width=1,e.image.height=1})},didWriteView:({root:e})=>{e.ref.images.forEach(e=>{e.dirty=!1})},write:e.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:({root:e})=>{let t=e.ref.images[e.ref.images.length-1];t.translateY=0,t.scaleX=1,t.scaleY=1,t.opacity=1},DID_IMAGE_PREVIEW_CONTAINER_CREATE:({root:e,props:t})=>{let{id:r}=t,i=e.query("GET_ITEM",r);i&&z(URL.createObjectURL(i.file),(t,i)=>{e.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:r,width:t,height:i})})},DID_FINISH_CALCULATE_PREVIEWSIZE:({root:e,props:t})=>{let{id:r}=t,l=e.query("GET_ITEM",r);if(!l)return;let n=URL.createObjectURL(l.file),o=()=>{ea(n).then(u)},u=r=>{URL.revokeObjectURL(n);let i=(l.getMetadata("exif")||{}).orientation||-1,{width:o,height:d}=r;if(!o||!d)return;i>=5&&i<=8&&([o,d]=[d,o]);let u=Math.max(1,.75*window.devicePixelRatio),c=e.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*u,p=d/o,f=e.rect.element.width,E=e.rect.element.height,_=f,m=_*p;p>1?m=(_=Math.min(o,f*c))*p:_=(m=Math.min(d,E*c))/p;let h=K(r,_,m,i),I=()=>{let i=e.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?ee(data):null;l.setMetadata("color",i,!0),"close"in r&&r.close(),e.ref.overlayShadow.opacity=1,s({root:e,props:t,image:h})},T=l.getMetadata("filter");T?a(e,T,h).then(I):I()};if(d(l.file)){let e=i($);e.post({file:l.file},t=>{if(e.terminate(),!t){o();return}u(t)})}else o()},DID_UPDATE_ITEM_METADATA:({root:e,props:t,action:r})=>{if(!/crop|filter|markup|resize/.test(r.change.key)||!e.ref.images.length)return;let i=e.query("GET_ITEM",{id:t.id});if(i){if(/filter/.test(r.change.key)){let t=e.ref.images[e.ref.images.length-1];a(e,r.change.value,t.image);return}if(/crop|markup|resize/.test(r.change.key)){let r=i.getMetadata("crop"),a=e.ref.images[e.ref.images.length-1];if(r&&r.aspectRatio&&a.crop&&a.crop.aspectRatio&&Math.abs(r.aspectRatio-a.crop.aspectRatio)>1e-5){let r=n({root:e});s({root:e,props:t,image:er(r.image)})}else o({root:e,props:t})}}},DID_THROW_ITEM_LOAD_ERROR:c,DID_THROW_ITEM_PROCESSING_ERROR:c,DID_THROW_ITEM_INVALID:c,DID_COMPLETE_ITEM_PROCESSING:({root:e})=>{e.ref.overlayShadow.opacity=.25,e.ref.overlaySuccess.opacity=1},DID_START_ITEM_PROCESSING:u,DID_REVERT_ITEM_PROCESSING:u},({root:e})=>{let t=e.ref.imageViewBin.filter(e=>0===e.opacity);e.ref.imageViewBin=e.ref.imageViewBin.filter(e=>e.opacity>0),t.forEach(t=>l(e,t)),t.length=0})})},en=e=>{let{addFilter:t,utils:r}=e,{Type:a,createRoute:l,isFile:n}=r,s=el(e);return t("CREATE_VIEW",e=>{let{is:t,view:r,query:a}=e;if(!t("file")||!a("GET_ALLOW_IMAGE_PREVIEW"))return;let o=(e,t)=>{if(!e.ref.imagePreview)return;let{id:r}=t,i=e.query("GET_ITEM",{id:r});if(!i)return;let a=e.query("GET_PANEL_ASPECT_RATIO"),l=e.query("GET_ITEM_PANEL_ASPECT_RATIO"),n=e.query("GET_IMAGE_PREVIEW_HEIGHT");if(a||l||n)return;let{imageWidth:s,imageHeight:o}=e.ref;if(!s||!o)return;let d=e.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),u=e.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),c=(i.getMetadata("exif")||{}).orientation||-1;if(c>=5&&c<=8&&([s,o]=[o,s]),!J(i.file)||e.query("GET_IMAGE_PREVIEW_UPSCALE")){let e=2048/s;s*=e,o*=e}let p=o/s,f=(i.getMetadata("crop")||{}).aspectRatio||p,E=Math.max(d,Math.min(o,u)),_=Math.min(e.rect.element.width*f,E);e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:i.id,height:_})},d=({root:e})=>{e.ref.shouldRescale=!0};r.registerWriter(l({DID_RESIZE_ROOT:d,DID_STOP_RESIZE:d,DID_LOAD_ITEM:({root:e,props:t})=>{let{id:l}=t,o=a("GET_ITEM",l);if(!o||!n(o.file)||o.archived)return;let d=o.file;if(!i(d)||!a("GET_IMAGE_PREVIEW_FILTER_ITEM")(o))return;let u="createImageBitmap"in(window||{}),c=a("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!u&&c&&d.size>c)return;e.ref.imagePreview=r.appendChildView(r.createChildView(s,{id:l}));let p=e.query("GET_IMAGE_PREVIEW_HEIGHT");p&&e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:o.id,height:p});let f=!u&&d.size>a("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");e.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:l},f)},DID_IMAGE_PREVIEW_CALCULATE_SIZE:({root:e,action:t})=>{e.ref.imageWidth=t.width,e.ref.imageHeight=t.height,e.ref.shouldRescale=!0,e.ref.shouldDrawPreview=!0,e.dispatch("KICK")},DID_UPDATE_ITEM_METADATA:({root:e,action:t})=>{"crop"===t.change.key&&(e.ref.shouldRescale=!0)}},({root:e,props:t})=>{e.ref.imagePreview&&!e.rect.element.hidden&&(e.ref.shouldRescale&&(o(e,t),e.ref.shouldRescale=!1),e.ref.shouldDrawPreview&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:t.id})})}),e.ref.shouldDrawPreview=!1))}))}),{options:{allowImagePreview:[!0,a.BOOLEAN],imagePreviewFilterItem:[()=>!0,a.FUNCTION],imagePreviewHeight:[null,a.INT],imagePreviewMinHeight:[44,a.INT],imagePreviewMaxHeight:[256,a.INT],imagePreviewMaxFileSize:[null,a.INT],imagePreviewZoomFactor:[2,a.INT],imagePreviewUpscale:[!1,a.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,a.INT],imagePreviewTransparencyIndicator:[null,a.STRING],imagePreviewCalculateAverageImageColor:[!1,a.BOOLEAN],imagePreviewMarkupShow:[!0,a.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,a.FUNCTION]}}};"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:en}));let es=en},83855:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let i=(0,r(62881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},69508:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let i=(0,r(62881).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},29204:(e,t,r)=>{"use strict";r.d(t,{Q9:()=>aP,fo:()=>av});var i=r(17266),a=r.n(i);let l=e=>e instanceof HTMLElement,n=(e,t=[],r=[])=>{let i={...e},a=[],l=[],n=(e,t,r)=>{if(r&&!document.hidden){l.push({type:e,data:t});return}d[e]&&d[e](t),a.push({type:e,data:t})},s=(e,...t)=>o[e]?o[e](...t):null,o={};t.forEach(e=>{o={...e(i),...o}});let d={};return r.forEach(e=>{d={...e(n,s,i),...d}}),{getState:()=>({...i}),processActionQueue:()=>{let e=[...a];return a.length=0,e},processDispatchQueue:()=>{let e=[...l];l.length=0,e.forEach(({type:e,data:t})=>{n(e,t)})},dispatch:n,query:s}},s=(e,t,r)=>{if("function"==typeof r){e[t]=r;return}Object.defineProperty(e,t,{...r})},o=(e,t)=>{for(let r in e)e.hasOwnProperty(r)&&t(r,e[r])},d=e=>{let t={};return o(e,r=>{s(t,r,e[r])}),t},u=(e,t,r=null)=>{if(null===r)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,r)},c=["svg","path"],p=e=>c.includes(e),f=(e,t,r={})=>{"object"==typeof t&&(r=t,t=null);let i=p(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return t&&(p(e)?u(i,"class",t):i.className=t),o(r,(e,t)=>{u(i,e,t)}),i},E=e=>(t,r)=>{void 0!==r&&e.children[r]?e.insertBefore(t,e.children[r]):e.appendChild(t)},_=(e,t)=>(e,r)=>(void 0!==r?t.splice(r,0,e):t.push(e),e),m=(e,t)=>r=>(t.splice(t.indexOf(r),1),r.element.parentNode&&e.removeChild(r.element),r),h="undefined"!=typeof window&&void 0!==window.document,I=()=>h,T="children"in(I()?f("svg"):{})?e=>e.children.length:e=>e.childNodes.length,g=(e,t,r,i)=>{let a=r[0]||e.left,l=r[1]||e.top,n=a+e.width,s=l+e.height*(i[1]||1),o={element:{...e},inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:a,top:l,right:n,bottom:s}};return t.filter(e=>!e.isRectIgnored()).map(e=>e.rect).forEach(e=>{y(o.inner,{...e.inner}),y(o.outer,{...e.outer})}),R(o.inner),o.outer.bottom+=o.element.marginBottom,o.outer.right+=o.element.marginRight,R(o.outer),o},y=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},R=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},A=e=>"number"==typeof e,O=(e,t,r,i=.001)=>Math.abs(e-t)<i&&Math.abs(r)<i,D=e=>e<.5?2*e*e:-1+(4-2*e)*e,S={spring:({stiffness:e=.5,damping:t=.75,mass:r=10}={})=>{let i=null,a=null,l=0,n=!1,s=d({interpolate:(o,d)=>{if(!n){if(!(A(i)&&A(a))){n=!0,l=0;return}l+=-(a-i)*e/r,a+=l,l*=t,O(a,i,l)||d?(a=i,l=0,n=!0,s.onupdate(a),s.oncomplete(a)):s.onupdate(a)}},target:{set:e=>{if(A(e)&&!A(a)&&(a=e),null===i&&(i=e,a=e),a===(i=e)||void 0===i){n=!0,l=0,s.onupdate(a),s.oncomplete(a);return}n=!1},get:()=>i},resting:{get:()=>n},onupdate:e=>{},oncomplete:e=>{}});return s},tween:({duration:e=500,easing:t=D,delay:r=0}={})=>{let i,a,l=null,n=!0,s=!1,o=null,u=d({interpolate:(d,c)=>{!n&&null!==o&&(null===l&&(l=d),d-l<r||((i=d-l-r)>=e||c?(i=1,a=s?0:1,u.onupdate(a*o),u.oncomplete(a*o),n=!0):(a=i/e,u.onupdate((i>=0?t(s?1-a:a):0)*o))))},target:{get:()=>s?0:o,set:e=>{if(null===o){o=e,u.onupdate(e),u.oncomplete(e);return}e<o?(o=1,s=!0):(s=!1,o=e),n=!1,l=null}},resting:{get:()=>n},onupdate:e=>{},oncomplete:e=>{}});return u}},v=(e,t,r)=>{let i=e[t]&&"object"==typeof e[t][r]?e[t][r]:e[t]||e,a="string"==typeof i?i:i.type,l="object"==typeof i?{...i}:{};return S[a]?S[a](l):null},w=(e,t,r,i=!1)=>{(t=Array.isArray(t)?t:[t]).forEach(t=>{e.forEach(e=>{let a=e,l=()=>r[e],n=t=>r[e]=t;"object"==typeof e&&(a=e.key,l=e.getter||l,n=e.setter||n),(!t[a]||i)&&(t[a]={get:l,set:n})})})},b=e=>(t,r)=>{e.addEventListener(t,r)},M=e=>(t,r)=>{e.removeEventListener(t,r)},L=e=>null!=e,P={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},C=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(let r in t)if(t[r]!==e[r])return!0;return!1},N=(e,{opacity:t,perspective:r,translateX:i,translateY:a,scaleX:l,scaleY:n,rotateX:s,rotateY:o,rotateZ:d,originX:u,originY:c,width:p,height:f})=>{let E="",_="";(L(u)||L(c))&&(_+=`transform-origin: ${u||0}px ${c||0}px;`),L(r)&&(E+=`perspective(${r}px) `),(L(i)||L(a))&&(E+=`translate3d(${i||0}px, ${a||0}px, 0) `),(L(l)||L(n))&&(E+=`scale3d(${L(l)?l:1}, ${L(n)?n:1}, 1) `),L(d)&&(E+=`rotateZ(${d}rad) `),L(s)&&(E+=`rotateX(${s}rad) `),L(o)&&(E+=`rotateY(${o}rad) `),E.length&&(_+=`transform:${E};`),L(t)&&(_+=`opacity:${t};`,0===t&&(_+="visibility:hidden;"),t<1&&(_+="pointer-events:none;")),L(f)&&(_+=`height:${f}px;`),L(p)&&(_+=`width:${p}px;`);let m=e.elementCurrentStyle||"";(_.length!==m.length||_!==m)&&(e.style.cssText=_,e.elementCurrentStyle=_)},G={styles:({mixinConfig:e,viewProps:t,viewInternalAPI:r,viewExternalAPI:i,view:a})=>{let l={...t},n={};w(e,[r,i],t);let s=()=>[t.translateX||0,t.translateY||0],o=()=>[t.scaleX||0,t.scaleY||0],d=()=>a.rect?g(a.rect,a.childViews,s(),o()):null;return r.rect={get:d},i.rect={get:d},e.forEach(e=>{t[e]=void 0===l[e]?P[e]:l[e]}),{write:()=>{if(C(n,t))return N(a.element,t),Object.assign(n,{...t}),!0},destroy:()=>{}}},listeners:({mixinConfig:e,viewProps:t,viewInternalAPI:r,viewExternalAPI:i,viewState:a,view:l})=>{let n=[],s=b(l.element),o=M(l.element);return i.on=(e,t)=>{n.push({type:e,fn:t}),s(e,t)},i.off=(e,t)=>{n.splice(n.findIndex(r=>r.type===e&&r.fn===t),1),o(e,t)},{write:()=>!0,destroy:()=>{n.forEach(e=>{o(e.type,e.fn)})}}},animations:({mixinConfig:e,viewProps:t,viewInternalAPI:r,viewExternalAPI:i})=>{let a={...t},l=[];return o(e,(e,n)=>{let s=v(n);s&&(s.onupdate=r=>{t[e]=r},s.target=a[e],w([{key:e,setter:e=>{s.target!==e&&(s.target=e)},getter:()=>t[e]}],[r,i],t,!0),l.push(s))}),{write:e=>{let t=document.hidden,r=!0;return l.forEach(i=>{i.resting||(r=!1),i.interpolate(e,t)}),r},destroy:()=>{}}},apis:({mixinConfig:e,viewProps:t,viewExternalAPI:r})=>{w(e,r,t)}},x=(e={},t={},r={})=>(t.layoutCalculated||(e.paddingTop=parseInt(r.paddingTop,10)||0,e.marginTop=parseInt(r.marginTop,10)||0,e.marginRight=parseInt(r.marginRight,10)||0,e.marginBottom=parseInt(r.marginBottom,10)||0,e.marginLeft=parseInt(r.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=null===t.offsetParent,e),V=({tag:e="div",name:t=null,attributes:r={},read:i=()=>{},write:a=()=>{},create:l=()=>{},destroy:n=()=>{},filterFrameActionsForChild:s=(e,t)=>t,didCreateView:o=()=>{},didWriteView:u=()=>{},ignoreRect:c=!1,ignoreRectUpdate:p=!1,mixins:h=[]}={})=>(I,y={})=>{let R=f(e,`filepond--${t}`,r),A=window.getComputedStyle(R,null),O=x(),D=null,S=!1,v=[],w=[],b={},M={},L=[a],P=[i],C=[n],N=()=>R,V=()=>v.concat(),U=()=>D||(D=g(O,v,[0,0],[1,1])),F={element:{get:N},style:{get:()=>A},childViews:{get:V}},B={...F,rect:{get:U},ref:{get:()=>b},is:e=>t===e,appendChild:E(R),createChildView:(e,t)=>e(I,t),linkView:e=>(v.push(e),e),unlinkView:e=>{v.splice(v.indexOf(e),1)},appendChildView:_(R,v),removeChildView:m(R,v),registerWriter:e=>L.push(e),registerReader:e=>P.push(e),registerDestroyer:e=>C.push(e),invalidateLayout:()=>R.layoutCalculated=!1,dispatch:I.dispatch,query:I.query},k={element:{get:N},childViews:{get:V},rect:{get:U},resting:{get:()=>S},isRectIgnored:()=>c,_read:()=>{D=null,v.forEach(e=>e._read()),p&&O.width&&O.height||x(O,R,A);let e={root:Y,props:y,rect:O};P.forEach(t=>t(e))},_write:(e,t,r)=>{let i=0===t.length;return L.forEach(a=>{!1===a({props:y,root:Y,actions:t,timestamp:e,shouldOptimize:r})&&(i=!1)}),w.forEach(t=>{!1===t.write(e)&&(i=!1)}),v.filter(e=>!!e.element.parentNode).forEach(a=>{a._write(e,s(a,t),r)||(i=!1)}),v.forEach((a,l)=>{a.element.parentNode||(Y.appendChild(a.element,l),a._read(),a._write(e,s(a,t),r),i=!1)}),S=i,u({props:y,root:Y,actions:t,timestamp:e}),i},_destroy:()=>{w.forEach(e=>e.destroy()),C.forEach(e=>{e({root:Y,props:y})}),v.forEach(e=>e._destroy())}},q={...F,rect:{get:()=>O}};Object.keys(h).sort((e,t)=>"styles"===e?1:"styles"===t?-1:0).forEach(e=>{let t=G[e]({mixinConfig:h[e],viewProps:y,viewState:M,viewInternalAPI:B,viewExternalAPI:k,view:d(q)});t&&w.push(t)});let Y=d(B);l({root:Y,props:y});let W=T(R);return v.forEach((e,t)=>{Y.appendChild(e.element,W+t)}),o(Y),d(k)},U=(e,t)=>({root:r,props:i,actions:a=[],timestamp:l,shouldOptimize:n})=>{a.filter(t=>e[t.type]).forEach(t=>e[t.type]({root:r,props:i,action:t.data,timestamp:l,shouldOptimize:n})),t&&t({root:r,props:i,actions:a,timestamp:l,shouldOptimize:n})},F=(e,t)=>t.parentNode.insertBefore(e,t),B=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),k=e=>Array.isArray(e),q=e=>null==e,Y=e=>e.trim(),W=e=>""+e,H=e=>"boolean"==typeof e,X=e=>H(e)?e:"true"===e,$=e=>"string"==typeof e,j=e=>A(e)?e:$(e)?W(e).replace(/[a-z]+/gi,""):0,z=e=>parseInt(j(e),10),Q=e=>parseFloat(j(e)),Z=e=>A(e)&&isFinite(e)&&Math.floor(e)===e,K=(e,t=1e3)=>{if(Z(e))return e;let r=W(e).trim();return/MB$/i.test(r)?z(r=r.replace(/MB$i/,"").trim())*t*t:/KB/i.test(r)?z(r=r.replace(/KB$i/,"").trim())*t:z(r)},J=e=>"function"==typeof e,ee=e=>{let t=self,r=e.split("."),i=null;for(;i=r.shift();)if(!(t=t[i]))return null;return t},et={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},er=e=>{let t={};return t.url=$(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},o(et,r=>{t[r]=ei(r,e[r],et[r],t.timeout,t.headers)}),t.process=e.process||$(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t},ei=(e,t,r,i,a)=>{if(null===t)return null;if("function"==typeof t)return t;let l={url:"GET"===r||"PATCH"===r?`?${e}=`:"",method:r,headers:a,withCredentials:!1,timeout:i,onload:null,ondata:null,onerror:null};if($(t))return l.url=t,l;if(Object.assign(l,t),$(l.headers)){let e=l.headers.split(/:(.+)/);l.headers={header:e[0],value:e[1]}}return l.withCredentials=X(l.withCredentials),l},ea=e=>null===e,el=e=>"object"==typeof e&&null!==e,en=e=>el(e)&&$(e.url)&&el(e.process)&&el(e.revert)&&el(e.restore)&&el(e.fetch),es=e=>k(e)?"array":ea(e)?"null":Z(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":en(e)?"api":typeof e,eo=e=>e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),ed={array:(e,t=",")=>q(e)?[]:k(e)?e:W(e).split(t).map(Y).filter(e=>e.length),boolean:X,int:e=>"bytes"===es(e)?K(e):z(e),number:Q,float:Q,bytes:K,string:e=>J(e)?e:W(e),function:e=>ee(e),serverapi:e=>er(e),object:e=>{try{return JSON.parse(eo(e))}catch(e){return null}}},eu=(e,t)=>ed[t](e),ec=(e,t,r)=>{if(e===t)return e;let i=es(e);if(i!==r){let t=eu(e,r);if(i=es(t),null===t)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${r}"`;e=t}return e},ep=(e,t)=>{let r=e;return{enumerable:!0,get:()=>r,set:i=>{r=ec(i,e,t)}}},ef=e=>{let t={};return o(e,r=>{let i=e[r];t[r]=ep(i[0],i[1])}),d(t)},eE=e=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:ef(e)}),e_=(e,t="-")=>e.split(/(?=[A-Z])/).map(e=>e.toLowerCase()).join(t),em=(e,t)=>{let r={};return o(t,t=>{r[t]={get:()=>e.getState().options[t],set:r=>{e.dispatch(`SET_${e_(t,"_").toUpperCase()}`,{value:r})}}}),r},eh=e=>(t,r,i)=>{let a={};return o(e,e=>{let r=e_(e,"_").toUpperCase();a[`SET_${r}`]=a=>{try{i.options[e]=a.value}catch(e){}t(`DID_SET_${r}`,{value:i.options[e]})}}),a},eI=e=>t=>{let r={};return o(e,e=>{r[`GET_${e_(e,"_").toUpperCase()}`]=r=>t.options[e]}),r},eT={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},eg=()=>Math.random().toString(36).substring(2,11),ey=(e,t)=>e.splice(t,1),eR=(e,t)=>{t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)},eA=()=>{let e=[],t=(t,r)=>{ey(e,e.findIndex(e=>e.event===t&&(e.cb===r||!r)))},r=(t,r,i)=>{e.filter(e=>e.event===t).map(e=>e.cb).forEach(e=>eR(()=>e(...r),i))};return{fireSync:(e,...t)=>{r(e,t,!0)},fire:(e,...t)=>{r(e,t,!1)},on:(t,r)=>{e.push({event:t,cb:r})},onOnce:(r,i)=>{e.push({event:r,cb:(...e)=>{t(r,i),i(...e)}})},off:t}},eO=(e,t,r)=>{Object.getOwnPropertyNames(e).filter(e=>!r.includes(e)).forEach(r=>Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r)))},eD=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],eS=e=>{let t={};return eO(e,t,eD),t},ev=e=>{e.forEach((t,r)=>{t.released&&ey(e,r)})},ew={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},eb={INPUT:1,LIMBO:2,LOCAL:3},eM=e=>/[^0-9]+/.exec(e),eL=()=>eM(1.1.toLocaleString())[0],eP={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},eC=[],eN=(e,t,r)=>new Promise((i,a)=>{let l=eC.filter(t=>t.key===e).map(e=>e.cb);if(0===l.length){i(t);return}let n=l.shift();l.reduce((e,t)=>e.then(e=>t(e,r)),n(t,r)).then(e=>i(e)).catch(e=>a(e))}),eG=(e,t,r)=>eC.filter(t=>t.key===e).map(e=>e.cb(t,r)),ex=(e,t)=>eC.push({key:e,cb:t}),eV=e=>Object.assign(eB,e),eU=()=>({...eB}),eF=e=>{o(e,(e,t)=>{eB[e]&&(eB[e][0]=ec(t,eB[e][0],eB[e][1]))})},eB={id:[null,eP.STRING],name:["filepond",eP.STRING],disabled:[!1,eP.BOOLEAN],className:[null,eP.STRING],required:[!1,eP.BOOLEAN],captureMethod:[null,eP.STRING],allowSyncAcceptAttribute:[!0,eP.BOOLEAN],allowDrop:[!0,eP.BOOLEAN],allowBrowse:[!0,eP.BOOLEAN],allowPaste:[!0,eP.BOOLEAN],allowMultiple:[!1,eP.BOOLEAN],allowReplace:[!0,eP.BOOLEAN],allowRevert:[!0,eP.BOOLEAN],allowRemove:[!0,eP.BOOLEAN],allowProcess:[!0,eP.BOOLEAN],allowReorder:[!1,eP.BOOLEAN],allowDirectoriesOnly:[!1,eP.BOOLEAN],storeAsFile:[!1,eP.BOOLEAN],forceRevert:[!1,eP.BOOLEAN],maxFiles:[null,eP.INT],checkValidity:[!1,eP.BOOLEAN],itemInsertLocationFreedom:[!0,eP.BOOLEAN],itemInsertLocation:["before",eP.STRING],itemInsertInterval:[75,eP.INT],dropOnPage:[!1,eP.BOOLEAN],dropOnElement:[!0,eP.BOOLEAN],dropValidation:[!1,eP.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],eP.ARRAY],instantUpload:[!0,eP.BOOLEAN],maxParallelUploads:[2,eP.INT],allowMinimumUploadDuration:[!0,eP.BOOLEAN],chunkUploads:[!1,eP.BOOLEAN],chunkForce:[!1,eP.BOOLEAN],chunkSize:[5e6,eP.INT],chunkRetryDelays:[[500,1e3,3e3],eP.ARRAY],server:[null,eP.SERVER_API],fileSizeBase:[1e3,eP.INT],labelFileSizeBytes:["bytes",eP.STRING],labelFileSizeKilobytes:["KB",eP.STRING],labelFileSizeMegabytes:["MB",eP.STRING],labelFileSizeGigabytes:["GB",eP.STRING],labelDecimalSeparator:[eL(),eP.STRING],labelThousandsSeparator:[(()=>{let e=eL(),t=1e3.toLocaleString();return"1000"!==t?eM(t)[0]:"."===e?",":"."})(),eP.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',eP.STRING],labelInvalidField:["Field contains invalid files",eP.STRING],labelFileWaitingForSize:["Waiting for size",eP.STRING],labelFileSizeNotAvailable:["Size not available",eP.STRING],labelFileCountSingular:["file in list",eP.STRING],labelFileCountPlural:["files in list",eP.STRING],labelFileLoading:["Loading",eP.STRING],labelFileAdded:["Added",eP.STRING],labelFileLoadError:["Error during load",eP.STRING],labelFileRemoved:["Removed",eP.STRING],labelFileRemoveError:["Error during remove",eP.STRING],labelFileProcessing:["Uploading",eP.STRING],labelFileProcessingComplete:["Upload complete",eP.STRING],labelFileProcessingAborted:["Upload cancelled",eP.STRING],labelFileProcessingError:["Error during upload",eP.STRING],labelFileProcessingRevertError:["Error during revert",eP.STRING],labelTapToCancel:["tap to cancel",eP.STRING],labelTapToRetry:["tap to retry",eP.STRING],labelTapToUndo:["tap to undo",eP.STRING],labelButtonRemoveItem:["Remove",eP.STRING],labelButtonAbortItemLoad:["Abort",eP.STRING],labelButtonRetryItemLoad:["Retry",eP.STRING],labelButtonAbortItemProcessing:["Cancel",eP.STRING],labelButtonUndoItemProcessing:["Undo",eP.STRING],labelButtonRetryItemProcessing:["Retry",eP.STRING],labelButtonProcessItem:["Upload",eP.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',eP.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',eP.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',eP.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',eP.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',eP.STRING],oninit:[null,eP.FUNCTION],onwarning:[null,eP.FUNCTION],onerror:[null,eP.FUNCTION],onactivatefile:[null,eP.FUNCTION],oninitfile:[null,eP.FUNCTION],onaddfilestart:[null,eP.FUNCTION],onaddfileprogress:[null,eP.FUNCTION],onaddfile:[null,eP.FUNCTION],onprocessfilestart:[null,eP.FUNCTION],onprocessfileprogress:[null,eP.FUNCTION],onprocessfileabort:[null,eP.FUNCTION],onprocessfilerevert:[null,eP.FUNCTION],onprocessfile:[null,eP.FUNCTION],onprocessfiles:[null,eP.FUNCTION],onremovefile:[null,eP.FUNCTION],onpreparefile:[null,eP.FUNCTION],onupdatefiles:[null,eP.FUNCTION],onreorderfiles:[null,eP.FUNCTION],beforeDropFile:[null,eP.FUNCTION],beforeAddFile:[null,eP.FUNCTION],beforeRemoveFile:[null,eP.FUNCTION],beforePrepareFile:[null,eP.FUNCTION],stylePanelLayout:[null,eP.STRING],stylePanelAspectRatio:[null,eP.STRING],styleItemPanelAspectRatio:[null,eP.STRING],styleButtonRemoveItemPosition:["left",eP.STRING],styleButtonProcessItemPosition:["right",eP.STRING],styleLoadIndicatorPosition:["right",eP.STRING],styleProgressIndicatorPosition:["right",eP.STRING],styleButtonRemoveItemAlign:[!1,eP.BOOLEAN],files:[[],eP.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],eP.ARRAY]},ek=(e,t)=>q(t)?e[0]||null:Z(t)?e[t]||null:("object"==typeof t&&(t=t.id),e.find(e=>e.id===t)||null),eq=e=>{if(q(e))return e;if(/:/.test(e)){let t=e.split(":");return t[1]/t[0]}return parseFloat(e)},eY=e=>e.filter(e=>!e.archived),eW={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4},eH=null,eX=()=>{if(null===eH)try{let e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));let t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,eH=1===t.files.length}catch(e){eH=!1}return eH},e$=[ew.LOAD_ERROR,ew.PROCESSING_ERROR,ew.PROCESSING_REVERT_ERROR],ej=[ew.LOADING,ew.PROCESSING,ew.PROCESSING_QUEUED,ew.INIT],ez=[ew.PROCESSING_COMPLETE],eQ=e=>e$.includes(e.status),eZ=e=>ej.includes(e.status),eK=e=>ez.includes(e.status),eJ=e=>el(e.options.server)&&(el(e.options.server.process)||J(e.options.server.process)),e0=e=>({GET_STATUS:()=>{let t=eY(e.items),{EMPTY:r,ERROR:i,BUSY:a,IDLE:l,READY:n}=eW;return 0===t.length?r:t.some(eQ)?i:t.some(eZ)?a:t.some(eK)?n:l},GET_ITEM:t=>ek(e.items,t),GET_ACTIVE_ITEM:t=>ek(eY(e.items),t),GET_ACTIVE_ITEMS:()=>eY(e.items),GET_ITEMS:()=>e.items,GET_ITEM_NAME:t=>{let r=ek(e.items,t);return r?r.filename:null},GET_ITEM_SIZE:t=>{let r=ek(e.items,t);return r?r.fileSize:null},GET_STYLES:()=>Object.keys(e.options).filter(e=>/^style/.test(e)).map(t=>({name:t,value:e.options[t]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(e.options.stylePanelLayout)?1:eq(e.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>e.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:t=>eY(e.items).filter(e=>e.status===t),GET_TOTAL_ITEMS:()=>eY(e.items).length,SHOULD_UPDATE_FILE_INPUT:()=>e.options.storeAsFile&&eX()&&!eJ(e),IS_ASYNC:()=>eJ(e),GET_FILE_SIZE_LABELS:e=>({labelBytes:e("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:e("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:e("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:e("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),e1=e=>{let t=eY(e.items).length;if(!e.options.allowMultiple)return 0===t;let r=e.options.maxFiles;return null===r||t<r},e2=(e,t,r)=>Math.max(Math.min(r,e),t),e5=(e,t,r)=>e.splice(t,0,r),e4=(e,t,r)=>q(t)?null:(void 0===r?e.push(t):(r=e2(r,0,e.length),e5(e,r,t)),t),e3=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),e9=e=>`${e}`.split("/").pop().split("?").shift(),e6=e=>e.split(".").pop(),e8=e=>{if("string"!=typeof e)return"";let t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?"jpeg"===t?"jpg":t:""},e7=(e,t="")=>(t+e).slice(-t.length),te=(e=new Date)=>`${e.getFullYear()}-${e7(e.getMonth()+1,"00")}-${e7(e.getDate(),"00")}_${e7(e.getHours(),"00")}-${e7(e.getMinutes(),"00")}-${e7(e.getSeconds(),"00")}`,tt=(e,t,r=null,i=null)=>{let a="string"==typeof r?e.slice(0,e.size,r):e.slice(0,e.size,e.type);return a.lastModifiedDate=new Date,e._relativePath&&(a._relativePath=e._relativePath),$(t)||(t=te()),t&&null===i&&e6(t)?a.name=t:(i=i||e8(a.type),a.name=t+(i?"."+i:"")),a},tr=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,ti=(e,t)=>{let r=tr();if(r){let i=new r;return i.append(e),i.getBlob(t)}return new Blob([e],{type:t})},ta=(e,t)=>{let r=new ArrayBuffer(e.length),i=new Uint8Array(r);for(let t=0;t<e.length;t++)i[t]=e.charCodeAt(t);return ti(r,t)},tl=e=>(/^data:(.+);/.exec(e)||[])[1]||null,tn=e=>e.split(",")[1].replace(/\s/g,""),ts=e=>atob(tn(e)),to=e=>{let t=tl(e);return ta(ts(e),t)},td=(e,t,r)=>tt(to(e),t,null,r),tu=e=>{if(!/^content-disposition:/i.test(e))return null;let t=e.split(/filename=|filename\*=.+''/).splice(1).map(e=>e.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(e=>e.length);return t.length?decodeURI(t[t.length-1]):null},tc=e=>{if(/content-length:/i.test(e)){let t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},tp=e=>/x-content-transfer-id:/i.test(e)&&(e.split(":")[1]||"").trim()||null,tf=e=>{let t={source:null,name:null,size:null};for(let r of e.split("\n")){let e=tu(r);if(e){t.name=e;continue}let i=tc(r);if(i){t.size=i;continue}let a=tp(r);if(a){t.source=a;continue}}return t},tE=e=>{let t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},r=r=>{if(!e){i.fire("error",{type:"error",body:"Can't load URL",code:400});return}t.timestamp=Date.now(),t.request=e(r,e=>{t.duration=Date.now()-t.timestamp,t.complete=!0,e instanceof Blob&&(e=tt(e,e.name||e9(r))),i.fire("load",e instanceof Blob?e:e?e.body:null)},e=>{i.fire("error","string"==typeof e?{type:"error",code:0,body:e}:e)},(e,r,a)=>{if(a&&(t.size=a),t.duration=Date.now()-t.timestamp,!e){t.progress=null;return}t.progress=r/a,i.fire("progress",t.progress)},()=>{i.fire("abort")},e=>{let r=tf("string"==typeof e?e:e.headers);i.fire("meta",{size:t.size||r.size,filename:r.name,source:r.source})})},i={...eA(),setSource:e=>t.source=e,getProgress:()=>t.progress,abort:()=>{t.request&&t.request.abort&&t.request.abort()},load:()=>{let e=t.source;i.fire("init",e),e instanceof File?i.fire("load",e):e instanceof Blob?i.fire("load",tt(e,e.name)):e3(e)?i.fire("load",td(e)):r(e)}};return i},t_=e=>/GET|HEAD/.test(e),tm=(e,t,r)=>{let i={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{a=!0,n.abort()}},a=!1,l=!1;r={method:"POST",headers:{},withCredentials:!1,...r},t=encodeURI(t),t_(r.method)&&e&&(t=`${t}${encodeURIComponent("string"==typeof e?e:JSON.stringify(e))}`);let n=new XMLHttpRequest;return(t_(r.method)?n:n.upload).onprogress=e=>{a||i.onprogress(e.lengthComputable,e.loaded,e.total)},n.onreadystatechange=()=>{n.readyState<2||4===n.readyState&&0===n.status||l||(l=!0,i.onheaders(n))},n.onload=()=>{n.status>=200&&n.status<300?i.onload(n):i.onerror(n)},n.onerror=()=>i.onerror(n),n.onabort=()=>{a=!0,i.onabort()},n.ontimeout=()=>i.ontimeout(n),n.open(r.method,t,!0),Z(r.timeout)&&(n.timeout=r.timeout),Object.keys(r.headers).forEach(e=>{let t=unescape(encodeURIComponent(r.headers[e]));n.setRequestHeader(e,t)}),r.responseType&&(n.responseType=r.responseType),r.withCredentials&&(n.withCredentials=!0),n.send(e),i},th=(e,t,r,i)=>({type:e,code:t,body:r,headers:i}),tI=e=>t=>{e(th("error",0,"Timeout",t.getAllResponseHeaders()))},tT=e=>/\?/.test(e),tg=(...e)=>{let t="";return e.forEach(e=>{t+=tT(t)&&tT(e)?e.replace(/\?/,"&"):e}),t},ty=(e="",t)=>{if("function"==typeof t)return t;if(!t||!$(t.url))return null;let r=t.onload||(e=>e),i=t.onerror||(e=>null);return(a,l,n,s,o,d)=>{let u=tm(a,tg(e,t.url),{...t,responseType:"blob"});return u.onload=e=>{let i=e.getAllResponseHeaders(),n=tf(i).name||e9(a);l(th("load",e.status,"HEAD"===t.method?null:tt(r(e.response),n),i))},u.onerror=e=>{n(th("error",e.status,i(e.response)||e.statusText,e.getAllResponseHeaders()))},u.onheaders=e=>{d(th("headers",e.status,null,e.getAllResponseHeaders()))},u.ontimeout=tI(n),u.onprogress=s,u.onabort=o,u}},tR={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},tA=(e,t,r,i,a,l,n,s,o,d,u)=>{let c=[],{chunkTransferId:p,chunkServer:f,chunkSize:E,chunkRetryDelays:_}=u,m={serverId:p,aborted:!1},h=t.ondata||(e=>e),I=t.onload||((e,t)=>"HEAD"===t?e.getResponseHeader("Upload-Offset"):e.response),T=t.onerror||(e=>null),g=Math.floor(i.size/E);for(let e=0;e<=g;e++){let t=e*E,r=i.slice(t,t+E,"application/offset+octet-stream");c[e]={index:e,size:r.size,offset:t,data:r,file:i,progress:0,retries:[..._],status:tR.QUEUED,error:null,request:null,timeout:null}}let y=()=>l(m.serverId),R=e=>e.status===tR.QUEUED||e.status===tR.ERROR,A=t=>{if(m.aborted)return;if(!(t=t||c.find(R))){c.every(e=>e.status===tR.COMPLETE)&&y();return}t.status=tR.PROCESSING,t.progress=null;let r=f.ondata||(e=>e),a=f.onerror||(e=>null),l=f.onload||(()=>{}),s=tg(e,f.url,m.serverId),d="function"==typeof f.headers?f.headers(t):{...f.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":t.offset,"Upload-Length":i.size,"Upload-Name":i.name},u=t.request=tm(r(t.data),s,{...f,headers:d});u.onload=e=>{l(e,t.index,c.length),t.status=tR.COMPLETE,t.request=null,S()},u.onprogress=(e,r,i)=>{t.progress=e?r:null,D()},u.onerror=e=>{t.status=tR.ERROR,t.request=null,t.error=a(e.response)||e.statusText,O(t)||n(th("error",e.status,a(e.response)||e.statusText,e.getAllResponseHeaders()))},u.ontimeout=e=>{t.status=tR.ERROR,t.request=null,O(t)||tI(n)(e)},u.onabort=()=>{t.status=tR.QUEUED,t.request=null,o()}},O=e=>0!==e.retries.length&&(e.status=tR.WAITING,clearTimeout(e.timeout),e.timeout=setTimeout(()=>{A(e)},e.retries.shift()),!0),D=()=>{let e=c.reduce((e,t)=>null===e||null===t.progress?null:e+t.progress,0);if(null===e)return s(!1,0,0);s(!0,e,c.reduce((e,t)=>e+t.size,0))},S=()=>{c.filter(e=>e.status===tR.PROCESSING).length>=1||A()},v=()=>{c.forEach(e=>{clearTimeout(e.timeout),e.request&&e.request.abort()})};return m.serverId?(r=>{let i=tg(e,f.url,m.serverId),a={headers:"function"==typeof t.headers?t.headers(m.serverId):{...t.headers},method:"HEAD"},l=tm(null,i,a);l.onload=e=>r(I(e,a.method)),l.onerror=e=>n(th("error",e.status,T(e.response)||e.statusText,e.getAllResponseHeaders())),l.ontimeout=tI(n)})(e=>{m.aborted||(c.filter(t=>t.offset<e).forEach(e=>{e.status=tR.COMPLETE,e.progress=e.size}),S())}):(l=>{let s=new FormData;el(a)&&s.append(r,JSON.stringify(a));let o="function"==typeof t.headers?t.headers(i,a):{...t.headers,"Upload-Length":i.size},d={...t,headers:o},u=tm(h(s),tg(e,t.url),d);u.onload=e=>l(I(e,d.method)),u.onerror=e=>n(th("error",e.status,T(e.response)||e.statusText,e.getAllResponseHeaders())),u.ontimeout=tI(n)})(e=>{m.aborted||(d(e),m.serverId=e,S())}),{abort:()=>{m.aborted=!0,v()}}},tO=(e,t,r,i)=>(a,l,n,s,o,d,u)=>{if(!a)return;let c=i.chunkUploads,p=c&&a.size>i.chunkSize,f=c&&(p||i.chunkForce);if(a instanceof Blob&&f)return tA(e,t,r,a,l,n,s,o,d,u,i);let E=t.ondata||(e=>e),_=t.onload||(e=>e),m=t.onerror||(e=>null),h="function"==typeof t.headers?t.headers(a,l)||{}:{...t.headers},I={...t,headers:h};var T=new FormData;el(l)&&T.append(r,JSON.stringify(l)),(a instanceof Blob?[{name:null,file:a}]:a).forEach(e=>{T.append(r,e.file,null===e.name?e.file.name:`${e.name}${e.file.name}`)});let g=tm(E(T),tg(e,t.url),I);return g.onload=e=>{n(th("load",e.status,_(e.response),e.getAllResponseHeaders()))},g.onerror=e=>{s(th("error",e.status,m(e.response)||e.statusText,e.getAllResponseHeaders()))},g.ontimeout=tI(s),g.onprogress=o,g.onabort=d,g},tD=(e="",t,r,i)=>"function"==typeof t?(...e)=>t(r,...e,i):t&&$(t.url)?tO(e,t,r,i):null,tS=(e="",t)=>{if("function"==typeof t)return t;if(!t||!$(t.url))return(e,t)=>t();let r=t.onload||(e=>e),i=t.onerror||(e=>null);return(a,l,n)=>{let s=tm(a,e+t.url,t);return s.onload=e=>{l(th("load",e.status,r(e.response),e.getAllResponseHeaders()))},s.onerror=e=>{n(th("error",e.status,i(e.response)||e.statusText,e.getAllResponseHeaders()))},s.ontimeout=tI(n),s}},tv=(e=0,t=1)=>e+Math.random()*(t-e),tw=(e,t=1e3,r=0,i=25,a=250)=>{let l=null,n=Date.now(),s=()=>{let r=Date.now()-n,o=tv(i,a);r+o>t&&(o=r+o-t);let d=r/t;if(d>=1||document.hidden){e(1);return}e(d),l=setTimeout(s,o)};return t>0&&s(),{clear:()=>{clearTimeout(l)}}},tb=(e,t)=>{let r={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:i}=t,a=()=>{r.request&&(r.perceivedPerformanceUpdater.clear(),r.request.abort&&r.request.abort(),r.complete=!0)},l=i?()=>r.progress?Math.min(r.progress,r.perceivedProgress):null:()=>r.progress||null,n=i?()=>Math.min(r.duration,r.perceivedDuration):()=>r.duration,s={...eA(),process:(t,a)=>{let l=()=>{0!==r.duration&&null!==r.progress&&s.fire("progress",s.getProgress())},n=()=>{r.complete=!0,s.fire("load-perceived",r.response.body)};s.fire("start"),r.timestamp=Date.now(),r.perceivedPerformanceUpdater=tw(e=>{r.perceivedProgress=e,r.perceivedDuration=Date.now()-r.timestamp,l(),r.response&&1===r.perceivedProgress&&!r.complete&&n()},i?tv(750,1500):0),r.request=e(t,a,e=>{r.response=el(e)?e:{type:"load",code:200,body:`${e}`,headers:{}},r.duration=Date.now()-r.timestamp,r.progress=1,s.fire("load",r.response.body),(!i||i&&1===r.perceivedProgress)&&n()},e=>{r.perceivedPerformanceUpdater.clear(),s.fire("error",el(e)?e:{type:"error",code:0,body:`${e}`})},(e,t,i)=>{r.duration=Date.now()-r.timestamp,r.progress=e?t/i:null,l()},()=>{r.perceivedPerformanceUpdater.clear(),s.fire("abort",r.response?r.response.body:null)},e=>{s.fire("transfer",e)})},abort:a,getProgress:l,getDuration:n,reset:()=>{a(),r.complete=!1,r.perceivedProgress=0,r.progress=0,r.timestamp=null,r.perceivedDuration=0,r.duration=0,r.request=null,r.response=null}};return s},tM=e=>e.substring(0,e.lastIndexOf("."))||e,tL=e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||e3(e)?t[0]=e.name||te():e3(e)?(t[1]=e.length,t[2]=tl(e)):$(e)&&(t[0]=e9(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}},tP=e=>!!(e instanceof File||e instanceof Blob&&e.name),tC=e=>{if(!el(e))return e;let t=k(e)?[]:{};for(let r in e){if(!e.hasOwnProperty(r))continue;let i=e[r];t[r]=i&&el(i)?tC(i):i}return t},tN=(e=null,t=null,r=null)=>{let i=eg(),a={archived:!1,frozen:!1,released:!1,source:null,file:r,serverFileReference:t,transferId:null,processingAborted:!1,status:t?ew.PROCESSING_COMPLETE:ew.INIT,activeLoader:null,activeProcessor:null},l=null,n={},s=e=>a.status=e,o=(e,...t)=>{a.released||a.frozen||p.fire(e,...t)},u=(e,t)=>{if(a.processingAborted){a.processingAborted=!1;return}if(s(ew.PROCESSING),l=null,!(a.file instanceof Blob)){p.on("load",()=>{u(e,t)});return}e.on("load",e=>{a.transferId=null,a.serverFileReference=e}),e.on("transfer",e=>{a.transferId=e}),e.on("load-perceived",e=>{a.activeProcessor=null,a.transferId=null,a.serverFileReference=e,s(ew.PROCESSING_COMPLETE),o("process-complete",e)}),e.on("start",()=>{o("process-start")}),e.on("error",e=>{a.activeProcessor=null,s(ew.PROCESSING_ERROR),o("process-error",e)}),e.on("abort",e=>{a.activeProcessor=null,a.serverFileReference=e,s(ew.IDLE),o("process-abort"),l&&l()}),e.on("progress",e=>{o("process-progress",e)});let r=console.error;t(a.file,t=>{a.archived||e.process(t,{...n})},r),a.activeProcessor=e},c=(e,t,r)=>{let i=e.split("."),a=i[0],l=i.pop(),s=n;i.forEach(e=>s=s[e]),JSON.stringify(s[l])!==JSON.stringify(t)&&(s[l]=t,o("metadata-update",{key:a,value:n[a],silent:r}))},p={id:{get:()=>i},origin:{get:()=>e,set:t=>e=t},serverId:{get:()=>a.serverFileReference},transferId:{get:()=>a.transferId},status:{get:()=>a.status},filename:{get:()=>a.file.name},filenameWithoutExtension:{get:()=>tM(a.file.name)},fileExtension:{get:()=>e6(a.file.name)},fileType:{get:()=>a.file.type},fileSize:{get:()=>a.file.size},file:{get:()=>a.file},relativePath:{get:()=>a.file._relativePath},source:{get:()=>a.source},getMetadata:e=>tC(e?n[e]:n),setMetadata:(e,t,r)=>el(e)?(Object.keys(e).forEach(r=>{c(r,e[r],t)}),e):(c(e,t,r),t),extend:(e,t)=>f[e]=t,abortLoad:()=>{if(a.activeLoader){a.activeLoader.abort();return}s(ew.INIT),o("load-abort")},retryLoad:()=>{a.activeLoader&&a.activeLoader.load()},requestProcessing:()=>{a.processingAborted=!1,s(ew.PROCESSING_QUEUED)},abortProcessing:()=>new Promise(e=>{if(!a.activeProcessor){a.processingAborted=!0,s(ew.IDLE),o("process-abort"),e();return}l=()=>{e()},a.activeProcessor.abort()}),load:(t,r,i)=>{if(a.source=t,p.fireSync("init"),a.file){p.fireSync("load-skip");return}a.file=tL(t),r.on("init",()=>{o("load-init")}),r.on("meta",t=>{a.file.size=t.size,a.file.filename=t.filename,t.source&&(e=eb.LIMBO,a.serverFileReference=t.source,a.status=ew.PROCESSING_COMPLETE),o("load-meta")}),r.on("progress",e=>{s(ew.LOADING),o("load-progress",e)}),r.on("error",e=>{s(ew.LOAD_ERROR),o("load-request-error",e)}),r.on("abort",()=>{s(ew.INIT),o("load-abort")}),r.on("load",t=>{a.activeLoader=null;let r=t=>{a.file=tP(t)?t:a.file,e===eb.LIMBO&&a.serverFileReference?s(ew.PROCESSING_COMPLETE):s(ew.IDLE),o("load")};if(a.serverFileReference){r(t);return}i(t,r,e=>{a.file=t,o("load-meta"),s(ew.LOAD_ERROR),o("load-file-error",e)})}),r.setSource(t),a.activeLoader=r,r.load()},process:u,revert:(e,t)=>new Promise((r,i)=>{let l=null!==a.serverFileReference?a.serverFileReference:a.transferId;if(null===l){r();return}e(l,()=>{a.serverFileReference=null,a.transferId=null,r()},e=>{if(!t){r();return}s(ew.PROCESSING_REVERT_ERROR),o("process-revert-error"),i(e)}),s(ew.IDLE),o("process-revert")}),...eA(),freeze:()=>a.frozen=!0,release:()=>a.released=!0,released:{get:()=>a.released},archive:()=>a.archived=!0,archived:{get:()=>a.archived},setFile:e=>a.file=e},f=d(p);return f},tG=(e,t)=>q(t)?0:$(t)?e.findIndex(e=>e.id===t):-1,tx=(e,t)=>{let r=tG(e,t);if(!(r<0))return e[r]||null},tV=(e,t,r,i,a,l)=>{let n=tm(null,e,{method:"GET",responseType:"blob"});return n.onload=r=>{let i=r.getAllResponseHeaders(),a=tf(i).name||e9(e);t(th("load",r.status,tt(r.response,a),i))},n.onerror=e=>{r(th("error",e.status,e.statusText,e.getAllResponseHeaders()))},n.onheaders=e=>{l(th("headers",e.status,null,e.getAllResponseHeaders()))},n.ontimeout=tI(r),n.onprogress=i,n.onabort=a,n},tU=e=>(0===e.indexOf("//")&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),tF=e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&tU(location.href)!==tU(e),tB=e=>(...t)=>J(e)?e(...t):e,tk=e=>!tP(e.file),tq=(e,t)=>{clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(()=>{e("DID_UPDATE_ITEMS",{items:eY(t.items)})},0)},tY=(e,...t)=>new Promise(r=>{if(!e)return r(!0);let i=e(...t);return null==i?r(!0):"boolean"==typeof i?r(i):void("function"==typeof i.then&&i.then(r))}),tW=(e,t)=>{e.items.sort((e,r)=>t(eS(e),eS(r)))},tH=(e,t)=>({query:r,success:i=()=>{},failure:a=()=>{},...l}={})=>{let n=ek(e.items,r);if(!n){a({error:th("error",0,"Item not found"),file:null});return}t(n,i,a,l||{})},tX=(e,t,r)=>({ABORT_ALL:()=>{eY(r.items).forEach(e=>{e.freeze(),e.abortLoad(),e.abortProcessing()})},DID_SET_FILES:({value:t=[]})=>{let i=t.map(e=>({source:e.source?e.source:e,options:e.options})),a=eY(r.items);a.forEach(t=>{i.find(e=>e.source===t.source||e.source===t.file)||e("REMOVE_ITEM",{query:t,remove:!1})}),a=eY(r.items),i.forEach((t,r)=>{a.find(e=>e.source===t.source||e.file===t.source)||e("ADD_ITEM",{...t,interactionMethod:eT.NONE,index:r})})},DID_UPDATE_ITEM_METADATA:({id:i,action:a,change:l})=>{l.silent||(clearTimeout(r.itemUpdateTimeout),r.itemUpdateTimeout=setTimeout(()=>{let n=tx(r.items,i);if(!t("IS_ASYNC")){eN("SHOULD_PREPARE_OUTPUT",!1,{item:n,query:t,action:a,change:l}).then(r=>{let a=t("GET_BEFORE_PREPARE_FILE");a&&(r=a(n,r)),r&&e("REQUEST_PREPARE_OUTPUT",{query:i,item:n,success:t=>{e("DID_PREPARE_OUTPUT",{id:i,file:t})}},!0)});return}n.origin===eb.LOCAL&&e("DID_LOAD_ITEM",{id:n.id,error:null,serverFileReference:n.source});let s=()=>{setTimeout(()=>{e("REQUEST_ITEM_PROCESSING",{query:i})},32)};if(n.status===ew.PROCESSING_COMPLETE)return(e=>{n.revert(tS(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(e?s:()=>{}).catch(()=>{})})(r.options.instantUpload);if(n.status===ew.PROCESSING){var o;return o=r.options.instantUpload,void n.abortProcessing().then(o?s:()=>{})}r.options.instantUpload&&s()},0))},MOVE_ITEM:({query:e,index:t})=>{let i=ek(r.items,e);if(!i)return;let a=r.items.indexOf(i);a!==(t=e2(t,0,r.items.length-1))&&r.items.splice(t,0,r.items.splice(a,1)[0])},SORT:({compare:i})=>{tW(r,i),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:r,index:i,interactionMethod:a,success:l=()=>{},failure:n=()=>{}})=>{let s=i;if(-1===i||void 0===i){let e=t("GET_ITEM_INSERT_LOCATION"),r=t("GET_TOTAL_ITEMS");s="before"===e?0:r}let o=t("GET_IGNORED_FILES");Promise.all(r.filter(e=>tP(e)?!o.includes(e.name.toLowerCase()):!q(e)).map(t=>new Promise((r,i)=>{e("ADD_ITEM",{interactionMethod:a,source:t.source||t,success:r,failure:i,index:s++,options:t.options||{}})}))).then(l).catch(n)},ADD_ITEM:({source:i,index:a=-1,interactionMethod:l,success:n=()=>{},failure:s=()=>{},options:o={}})=>{if(q(i)){s({error:th("error",0,"No source"),file:null});return}if(tP(i)&&r.options.ignoredFiles.includes(i.name.toLowerCase()))return;if(!e1(r)){if(r.options.allowMultiple||!r.options.allowMultiple&&!r.options.allowReplace){let t=th("warning",0,"Max files");e("DID_THROW_MAX_FILES",{source:i,error:t}),s({error:t,file:null});return}let d=eY(r.items)[0];if(d.status===ew.PROCESSING_COMPLETE||d.status===ew.PROCESSING_REVERT_ERROR){let u=t("GET_FORCE_REVERT");if(d.revert(tS(r.options.server.url,r.options.server.revert),u).then(()=>{u&&e("ADD_ITEM",{source:i,index:a,interactionMethod:l,success:n,failure:s,options:o})}).catch(()=>{}),u)return}e("REMOVE_ITEM",{query:d.id})}let d="local"===o.type?eb.LOCAL:"limbo"===o.type?eb.LIMBO:eb.INPUT,u=tN(d,d===eb.INPUT?null:i,o.file);Object.keys(o.metadata||{}).forEach(e=>{u.setMetadata(e,o.metadata[e])}),eG("DID_CREATE_ITEM",u,{query:t,dispatch:e});let c=t("GET_ITEM_INSERT_LOCATION");r.options.itemInsertLocationFreedom||(a="before"===c?-1:r.items.length),e4(r.items,u,a),J(c)&&i&&tW(r,c);let p=u.id;u.on("init",()=>{e("DID_INIT_ITEM",{id:p})}),u.on("load-init",()=>{e("DID_START_ITEM_LOAD",{id:p})}),u.on("load-meta",()=>{e("DID_UPDATE_ITEM_META",{id:p})}),u.on("load-progress",t=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:p,progress:t})}),u.on("load-request-error",t=>{let i=tB(r.options.labelFileLoadError)(t);if(t.code>=400&&t.code<500){e("DID_THROW_ITEM_INVALID",{id:p,error:t,status:{main:i,sub:`${t.code} (${t.body})`}}),s({error:t,file:eS(u)});return}e("DID_THROW_ITEM_LOAD_ERROR",{id:p,error:t,status:{main:i,sub:r.options.labelTapToRetry}})}),u.on("load-file-error",t=>{e("DID_THROW_ITEM_INVALID",{id:p,error:t.status,status:t.status}),s({error:t.status,file:eS(u)})}),u.on("load-abort",()=>{e("REMOVE_ITEM",{query:p})}),u.on("load-skip",()=>{u.on("metadata-update",t=>{tP(u.file)&&e("DID_UPDATE_ITEM_METADATA",{id:p,change:t})}),e("COMPLETE_LOAD_ITEM",{query:p,item:u,data:{source:i,success:n}})}),u.on("load",()=>{let a=a=>{if(!a){e("REMOVE_ITEM",{query:p});return}u.on("metadata-update",t=>{e("DID_UPDATE_ITEM_METADATA",{id:p,change:t})}),eN("SHOULD_PREPARE_OUTPUT",!1,{item:u,query:t}).then(a=>{let l=t("GET_BEFORE_PREPARE_FILE");l&&(a=l(u,a));let s=()=>{e("COMPLETE_LOAD_ITEM",{query:p,item:u,data:{source:i,success:n}}),tq(e,r)};if(a){e("REQUEST_PREPARE_OUTPUT",{query:p,item:u,success:t=>{e("DID_PREPARE_OUTPUT",{id:p,file:t}),s()}},!0);return}s()})};eN("DID_LOAD_ITEM",u,{query:t,dispatch:e}).then(()=>{tY(t("GET_BEFORE_ADD_FILE"),eS(u)).then(a)}).catch(t=>{if(!t||!t.error||!t.status)return a(!1);e("DID_THROW_ITEM_INVALID",{id:p,error:t.error,status:t.status})})}),u.on("process-start",()=>{e("DID_START_ITEM_PROCESSING",{id:p})}),u.on("process-progress",t=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:p,progress:t})}),u.on("process-error",t=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:p,error:t,status:{main:tB(r.options.labelFileProcessingError)(t),sub:r.options.labelTapToRetry}})}),u.on("process-revert-error",t=>{e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:p,error:t,status:{main:tB(r.options.labelFileProcessingRevertError)(t),sub:r.options.labelTapToRetry}})}),u.on("process-complete",t=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:p,error:null,serverFileReference:t}),e("DID_DEFINE_VALUE",{id:p,value:t})}),u.on("process-abort",()=>{e("DID_ABORT_ITEM_PROCESSING",{id:p})}),u.on("process-revert",()=>{e("DID_REVERT_ITEM_PROCESSING",{id:p}),e("DID_DEFINE_VALUE",{id:p,value:null})}),e("DID_ADD_ITEM",{id:p,index:a,interactionMethod:l}),tq(e,r);let{url:f,load:E,restore:_,fetch:m}=r.options.server||{};u.load(i,tE(d===eb.INPUT?$(i)&&tF(i)&&m?ty(f,m):tV:d===eb.LIMBO?ty(f,_):ty(f,E)),(e,r,i)=>{eN("LOAD_FILE",e,{query:t}).then(r).catch(i)})},REQUEST_PREPARE_OUTPUT:({item:e,success:r,failure:i=()=>{}})=>{let a={error:th("error",0,"Item not found"),file:null};if(e.archived)return i(a);eN("PREPARE_OUTPUT",e.file,{query:t,item:e}).then(l=>{eN("COMPLETE_PREPARE_OUTPUT",l,{query:t,item:e}).then(t=>{if(e.archived)return i(a);r(t)})})},COMPLETE_LOAD_ITEM:({item:i,data:a})=>{let{success:l,source:n}=a,s=t("GET_ITEM_INSERT_LOCATION");if(J(s)&&n&&tW(r,s),e("DID_LOAD_ITEM",{id:i.id,error:null,serverFileReference:i.origin===eb.INPUT?null:n}),l(eS(i)),i.origin===eb.LOCAL){e("DID_LOAD_LOCAL_ITEM",{id:i.id});return}if(i.origin===eb.LIMBO){e("DID_COMPLETE_ITEM_PROCESSING",{id:i.id,error:null,serverFileReference:n}),e("DID_DEFINE_VALUE",{id:i.id,value:i.serverId||n});return}t("IS_ASYNC")&&r.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:i.id})},RETRY_ITEM_LOAD:tH(r,e=>{e.retryLoad()}),REQUEST_ITEM_PREPARE:tH(r,(t,r,i)=>{e("REQUEST_PREPARE_OUTPUT",{query:t.id,item:t,success:i=>{e("DID_PREPARE_OUTPUT",{id:t.id,file:i}),r({file:t,output:i})},failure:i},!0)}),REQUEST_ITEM_PROCESSING:tH(r,(i,a,l)=>{if(!(i.status===ew.IDLE||i.status===ew.PROCESSING_ERROR)){let n=()=>e("REQUEST_ITEM_PROCESSING",{query:i,success:a,failure:l}),s=()=>document.hidden?n():setTimeout(n,32);i.status===ew.PROCESSING_COMPLETE||i.status===ew.PROCESSING_REVERT_ERROR?i.revert(tS(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(s).catch(()=>{}):i.status===ew.PROCESSING&&i.abortProcessing().then(s);return}i.status!==ew.PROCESSING_QUEUED&&(i.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:i.id}),e("PROCESS_ITEM",{query:i,success:a,failure:l},!0))}),PROCESS_ITEM:tH(r,(i,a,l)=>{let n=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",ew.PROCESSING).length===n){r.processingQueue.push({id:i.id,success:a,failure:l});return}if(i.status===ew.PROCESSING)return;let s=()=>{let t=r.processingQueue.shift();if(!t)return;let{id:i,success:a,failure:l}=t,n=ek(r.items,i);if(!n||n.archived){s();return}e("PROCESS_ITEM",{query:i,success:a,failure:l},!0)};i.onOnce("process-complete",()=>{a(eS(i)),s();let l=r.options.server;if(r.options.instantUpload&&i.origin===eb.LOCAL&&J(l.remove)){let e=()=>{};i.origin=eb.LIMBO,r.options.server.remove(i.source,e,e)}t("GET_ITEMS_BY_STATUS",ew.PROCESSING_COMPLETE).length===r.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),i.onOnce("process-error",e=>{l({error:e,file:eS(i)}),s()});let o=r.options;i.process(tb(tD(o.server.url,o.server.process,o.name,{chunkTransferId:i.transferId,chunkServer:o.server.patch,chunkUploads:o.chunkUploads,chunkForce:o.chunkForce,chunkSize:o.chunkSize,chunkRetryDelays:o.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(r,a,l)=>{eN("PREPARE_OUTPUT",r,{query:t,item:i}).then(t=>{e("DID_PREPARE_OUTPUT",{id:i.id,file:t}),a(t)}).catch(l)})}),RETRY_ITEM_PROCESSING:tH(r,t=>{e("REQUEST_ITEM_PROCESSING",{query:t})}),REQUEST_REMOVE_ITEM:tH(r,r=>{tY(t("GET_BEFORE_REMOVE_FILE"),eS(r)).then(t=>{t&&e("REMOVE_ITEM",{query:r})})}),RELEASE_ITEM:tH(r,e=>{e.release()}),REMOVE_ITEM:tH(r,(i,a,l,n)=>{let s=()=>{let t=i.id;tx(r.items,t).archive(),e("DID_REMOVE_ITEM",{error:null,id:t,item:i}),tq(e,r),a(eS(i))},o=r.options.server;i.origin===eb.LOCAL&&o&&J(o.remove)&&!1!==n.remove?(e("DID_START_ITEM_REMOVE",{id:i.id}),o.remove(i.source,()=>s(),t=>{e("DID_THROW_ITEM_REMOVE_ERROR",{id:i.id,error:th("error",0,t,null),status:{main:tB(r.options.labelFileRemoveError)(t),sub:r.options.labelTapToRetry}})})):((n.revert&&i.origin!==eb.LOCAL&&null!==i.serverId||r.options.chunkUploads&&i.file.size>r.options.chunkSize||r.options.chunkUploads&&r.options.chunkForce)&&i.revert(tS(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")),s())}),ABORT_ITEM_LOAD:tH(r,e=>{e.abortLoad()}),ABORT_ITEM_PROCESSING:tH(r,t=>{if(t.serverId){e("REVERT_ITEM_PROCESSING",{id:t.id});return}t.abortProcessing().then(()=>{r.options.instantUpload&&e("REMOVE_ITEM",{query:t.id})})}),REQUEST_REVERT_ITEM_PROCESSING:tH(r,i=>{if(!r.options.instantUpload){e("REVERT_ITEM_PROCESSING",{query:i});return}let a=t=>{t&&e("REVERT_ITEM_PROCESSING",{query:i})},l=t("GET_BEFORE_REMOVE_FILE");if(!l)return a(!0);let n=l(eS(i));return null==n?a(!0):"boolean"==typeof n?a(n):void("function"==typeof n.then&&n.then(a))}),REVERT_ITEM_PROCESSING:tH(r,i=>{i.revert(tS(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(()=>{(r.options.instantUpload||tk(i))&&e("REMOVE_ITEM",{query:i.id})}).catch(()=>{})}),SET_OPTIONS:({options:t})=>{let r=Object.keys(t),i=t$.filter(e=>r.includes(e));[...i,...Object.keys(t).filter(e=>!i.includes(e))].forEach(r=>{e(`SET_${e_(r,"_").toUpperCase()}`,{value:t[r]})})}}),t$=["server"],tj=e=>e,tz=e=>document.createElement(e),tQ=(e,t)=>{let r=e.childNodes[0];r?t!==r.nodeValue&&(r.nodeValue=t):(r=document.createTextNode(t),e.appendChild(r))},tZ=(e,t,r,i)=>{let a=(i%360-90)*Math.PI/180;return{x:e+r*Math.cos(a),y:t+r*Math.sin(a)}},tK=(e,t,r,i,a,l)=>{let n=tZ(e,t,r,a),s=tZ(e,t,r,i);return["M",n.x,n.y,"A",r,r,0,l,0,s.x,s.y].join(" ")},tJ=(e,t,r,i,a)=>{let l=1;return a>i&&a-i<=.5&&(l=0),i>a&&i-a>=.5&&(l=0),tK(e,t,r,360*Math.min(.9999,i),360*Math.min(.9999,a),l)},t0=V({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:({root:e,props:t})=>{t.spin=!1,t.progress=0,t.opacity=0;let r=f("svg");e.ref.path=f("path",{"stroke-width":2,"stroke-linecap":"round"}),r.appendChild(e.ref.path),e.ref.svg=r,e.appendChild(r)},write:({root:e,props:t})=>{if(0===t.opacity)return;t.align&&(e.element.dataset.align=t.align);let r=parseInt(u(e.ref.path,"stroke-width"),10),i=.5*e.rect.element.width,a=0,l=0;t.spin?(a=0,l=.5):(a=0,l=t.progress);let n=tJ(i,i,i-r,a,l);u(e.ref.path,"d",n),u(e.ref.path,"stroke-opacity",t.spin||t.progress>0?1:0)},mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),t1=V({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:({root:e,props:t})=>{e.element.innerHTML=(t.icon||"")+`<span>${t.label}</span>`,t.isDisabled=!1},write:({root:e,props:t})=>{let{isDisabled:r}=t,i=e.query("GET_DISABLED")||0===t.opacity;i&&!r?(t.isDisabled=!0,u(e.element,"disabled","disabled")):!i&&r&&(t.isDisabled=!1,e.element.removeAttribute("disabled"))}}),t2=(e,t=".",r=1e3,i={})=>{let{labelBytes:a="bytes",labelKilobytes:l="KB",labelMegabytes:n="MB",labelGigabytes:s="GB"}=i,o=r*r,d=r*r*r;return(e=Math.round(Math.abs(e)))<r?`${e} ${a}`:e<o?`${Math.floor(e/r)} ${l}`:e<d?`${t5(e/o,1,t)} ${n}`:`${t5(e/d,2,t)} ${s}`},t5=(e,t,r)=>e.toFixed(t).split(".").filter(e=>"0"!==e).join(r),t4=({root:e,props:t})=>{tQ(e.ref.fileSize,t2(e.query("GET_ITEM_SIZE",t.id),".",e.query("GET_FILE_SIZE_BASE"),e.query("GET_FILE_SIZE_LABELS",e.query))),tQ(e.ref.fileName,tj(e.query("GET_ITEM_NAME",t.id)))},t3=({root:e,props:t})=>{if(Z(e.query("GET_ITEM_SIZE",t.id))){t4({root:e,props:t});return}tQ(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},t9=V({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:U({DID_LOAD_ITEM:t4,DID_UPDATE_ITEM_META:t4,DID_THROW_ITEM_LOAD_ERROR:t3,DID_THROW_ITEM_INVALID:t3}),didCreateView:e=>{eG("CREATE_VIEW",{...e,view:e})},create:({root:e,props:t})=>{let r=tz("span");r.className="filepond--file-info-main",u(r,"aria-hidden","true"),e.appendChild(r),e.ref.fileName=r;let i=tz("span");i.className="filepond--file-info-sub",e.appendChild(i),e.ref.fileSize=i,tQ(i,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),tQ(r,tj(e.query("GET_ITEM_NAME",t.id)))},mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),t6=e=>Math.round(100*e),t8=({root:e,action:t})=>{let r=null===t.progress?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${t6(t.progress)}%`;tQ(e.ref.main,r),tQ(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},t7=({root:e})=>{tQ(e.ref.main,""),tQ(e.ref.sub,"")},re=({root:e,action:t})=>{tQ(e.ref.main,t.status.main),tQ(e.ref.sub,t.status.sub)},rt=V({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:U({DID_LOAD_ITEM:t7,DID_REVERT_ITEM_PROCESSING:t7,DID_REQUEST_ITEM_PROCESSING:({root:e})=>{tQ(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),tQ(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},DID_ABORT_ITEM_PROCESSING:({root:e})=>{tQ(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),tQ(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},DID_COMPLETE_ITEM_PROCESSING:({root:e})=>{tQ(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),tQ(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{let r=null===t.progress?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${t6(t.progress)}%`;tQ(e.ref.main,r),tQ(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},DID_UPDATE_ITEM_LOAD_PROGRESS:t8,DID_THROW_ITEM_LOAD_ERROR:re,DID_THROW_ITEM_INVALID:re,DID_THROW_ITEM_PROCESSING_ERROR:re,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:re,DID_THROW_ITEM_REMOVE_ERROR:re}),didCreateView:e=>{eG("CREATE_VIEW",{...e,view:e})},create:({root:e})=>{let t=tz("span");t.className="filepond--file-status-main",e.appendChild(t),e.ref.main=t;let r=tz("span");r.className="filepond--file-status-sub",e.appendChild(r),e.ref.sub=r,t8({root:e,action:{progress:null}})},mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),rr={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},ri=[];o(rr,e=>{ri.push(e)});let ra=e=>{if("right"===ro(e))return 0;let t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},rl=e=>e.ref.buttonAbortItemLoad.rect.element.width,rn=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.height/4),rs=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.left/2),ro=e=>e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),rd={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:e=>e.query("GET_STYLE_LOAD_INDICATOR_POSITION")},processProgressIndicator:{opacity:0,align:e=>e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},ru={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:ra},status:{translateX:ra}},rc={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},rp={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:ra},status:{translateX:ra,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:ra},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:ro},info:{translateX:ra},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:ro},buttonRemoveItem:{opacity:1},info:{translateX:ra},status:{opacity:1,translateX:ra}},DID_LOAD_ITEM:ru,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:ra},status:{translateX:ra}},DID_START_ITEM_PROCESSING:rc,DID_REQUEST_ITEM_PROCESSING:rc,DID_UPDATE_ITEM_PROCESS_PROGRESS:rc,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:ra}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:ra},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:ru},rf=V({create:({root:e})=>{e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),rE=U({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:e,action:t})=>{e.ref.buttonAbortItemRemoval.label=t.value},DID_REQUEST_ITEM_PROCESSING:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:e})=>{e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=t.progress}}),r_=V({create:({root:e,props:t})=>{let r;let i=Object.keys(rr).reduce((e,t)=>(e[t]={...rr[t]},e),{}),{id:a}=t,l=e.query("GET_ALLOW_REVERT"),n=e.query("GET_ALLOW_REMOVE"),s=e.query("GET_ALLOW_PROCESS"),d=e.query("GET_INSTANT_UPLOAD"),u=e.query("IS_ASYNC"),c=e.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");u?s&&!l?r=e=>!/RevertItemProcessing/.test(e):!s&&l?r=e=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(e):s||l||(r=e=>!/Process/.test(e)):r=e=>!/Process/.test(e);let p=r?ri.filter(r):ri.concat();if(d&&l&&(i.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",i.RevertItemProcessing.icon="GET_ICON_REMOVE"),u&&!l){let e=rp.DID_COMPLETE_ITEM_PROCESSING;e.info.translateX=rs,e.info.translateY=rn,e.status.translateY=rn,e.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(u&&!s&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(e=>{rp[e].status.translateY=rn}),rp.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=rl),c&&l){i.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";let e=rp.DID_COMPLETE_ITEM_PROCESSING;e.info.translateX=ra,e.status.translateY=rn,e.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}n||(i.RemoveItem.disabled=!0),o(i,(t,r)=>{let i=e.createChildView(t1,{label:e.query(r.label),icon:e.query(r.icon),opacity:0});p.includes(t)&&e.appendChildView(i),r.disabled&&(i.element.setAttribute("disabled","disabled"),i.element.setAttribute("hidden","hidden")),i.element.dataset.align=e.query(`GET_STYLE_${r.align}`),i.element.classList.add(r.className),i.on("click",t=>{t.stopPropagation(),r.disabled||e.dispatch(r.action,{query:a})}),e.ref[`button${t}`]=i}),e.ref.processingCompleteIndicator=e.appendChildView(e.createChildView(rf)),e.ref.processingCompleteIndicator.element.dataset.align=e.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),e.ref.info=e.appendChildView(e.createChildView(t9,{id:a})),e.ref.status=e.appendChildView(e.createChildView(rt,{id:a}));let f=e.appendChildView(e.createChildView(t0,{opacity:0,align:e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));f.element.classList.add("filepond--load-indicator"),e.ref.loadProgressIndicator=f;let E=e.appendChildView(e.createChildView(t0,{opacity:0,align:e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));E.element.classList.add("filepond--process-indicator"),e.ref.processProgressIndicator=E,e.ref.activeStyles=[]},write:({root:e,actions:t,props:r})=>{rE({root:e,actions:t,props:r});let i=t.concat().filter(e=>/^DID_/.test(e.type)).reverse().find(e=>rp[e.type]);if(i){e.ref.activeStyles=[];let t=rp[i.type];o(rd,(r,i)=>{let a=e.ref[r];o(i,(i,l)=>{let n=t[r]&&void 0!==t[r][i]?t[r][i]:l;e.ref.activeStyles.push({control:a,key:i,value:n})})})}e.ref.activeStyles.forEach(({control:t,key:r,value:i})=>{t[r]="function"==typeof i?i(e):i})},didCreateView:e=>{eG("CREATE_VIEW",{...e,view:e})},name:"file"}),rm=V({create:({root:e,props:t})=>{e.ref.fileName=tz("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(r_,{id:t.id})),e.ref.data=!1},ignoreRect:!0,write:U({DID_LOAD_ITEM:({root:e,props:t})=>{tQ(e.ref.fileName,tj(e.query("GET_ITEM_NAME",t.id)))}}),didCreateView:e=>{eG("CREATE_VIEW",{...e,view:e})},tag:"fieldset",name:"file-wrapper"}),rh={type:"spring",damping:.6,mass:7},rI=(e,t,r)=>{let i=V({name:`panel-${t.name} filepond--${r}`,mixins:t.mixins,ignoreRectUpdate:!0}),a=e.createChildView(i,t.props);e.ref[t.name]=e.appendChildView(a)},rT=V({name:"panel",read:({root:e,props:t})=>t.heightCurrent=e.ref.bottom.translateY,write:({root:e,props:t})=>{if((null===e.ref.scalable||t.scalable!==e.ref.scalable)&&(e.ref.scalable=!H(t.scalable)||t.scalable,e.element.dataset.scalable=e.ref.scalable),!t.height)return;let r=e.ref.top.rect.element,i=e.ref.bottom.rect.element,a=Math.max(r.height+i.height,t.height);e.ref.center.translateY=r.height,e.ref.center.scaleY=(a-r.height-i.height)/100,e.ref.bottom.translateY=a-i.height},create:({root:e,props:t})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:rh},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:rh},styles:["translateY"]}}].forEach(r=>{rI(e,r,t.name)}),e.element.classList.add(`filepond--${t.name}`),e.ref.scalable=null},ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),rg=e=>{let t;let r=e.map(e=>e.id);return{setIndex:e=>{t=e},getIndex:()=>t,getItemIndex:e=>r.indexOf(e.id)}},ry={type:"spring",stiffness:.75,damping:.45,mass:10},rR="spring",rA={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},rO=U({DID_UPDATE_PANEL_HEIGHT:({root:e,action:t})=>{e.height=t.height}}),rD=V({create:({root:e,props:t})=>{e.ref.handleClick=r=>e.dispatch("DID_ACTIVATE_ITEM",{id:t.id}),e.element.id=`filepond--item-${t.id}`,e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(rm,{id:t.id})),e.ref.panel=e.appendChildView(e.createChildView(rT,{name:"item-panel"})),e.ref.panel.height=null,t.markedForRemoval=!1,e.query("GET_ALLOW_REORDER")&&(e.element.dataset.dragState="idle",e.element.addEventListener("pointerdown",r=>{if(!r.isPrimary)return;let i=!1,a={x:r.pageX,y:r.pageY};t.dragOrigin={x:e.translateX,y:e.translateY},t.dragCenter={x:r.offsetX,y:r.offsetY};let l=rg(e.query("GET_ACTIVE_ITEMS"));e.dispatch("DID_GRAB_ITEM",{id:t.id,dragState:l});let n=r=>{r.isPrimary&&(r.stopPropagation(),r.preventDefault(),t.dragOffset={x:r.pageX-a.x,y:r.pageY-a.y},t.dragOffset.x*t.dragOffset.x+t.dragOffset.y*t.dragOffset.y>16&&!i&&(i=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:t.id,dragState:l}))},s=e=>{e.isPrimary&&(t.dragOffset={x:e.pageX-a.x,y:e.pageY-a.y},d())},o=()=>{d()},d=()=>{document.removeEventListener("pointercancel",o),document.removeEventListener("pointermove",n),document.removeEventListener("pointerup",s),e.dispatch("DID_DROP_ITEM",{id:t.id,dragState:l}),i&&setTimeout(()=>e.element.addEventListener("click",e.ref.handleClick),0)};document.addEventListener("pointercancel",o),document.addEventListener("pointermove",n),document.addEventListener("pointerup",s)}))},write:U({DID_GRAB_ITEM:({root:e,props:t})=>{t.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:({root:e})=>{e.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:e,props:t})=>{t.dragOffset=null,t.dragOrigin=null,e.element.dataset.dragState="drop"}},({root:e,actions:t,props:r,shouldOptimize:i})=>{"drop"===e.element.dataset.dragState&&e.scaleX<=1&&(e.element.dataset.dragState="idle");let a=t.concat().filter(e=>/^DID_/.test(e.type)).reverse().find(e=>rA[e.type]);a&&a.type!==r.currentState&&(r.currentState=a.type,e.element.dataset.filepondItemState=rA[r.currentState]||"");let l=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");l?i||(e.height=e.rect.element.width*l):(rO({root:e,actions:t,props:r}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),i&&(e.ref.panel.height=null),e.ref.panel.height=e.height}),destroy:({root:e,props:t})=>{e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:t.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:rR,scaleY:rR,translateX:ry,translateY:ry,opacity:{type:"tween",duration:150}}}});var rS=(e,t)=>Math.max(1,Math.floor((e+1)/t));let rv=(e,t,r)=>{if(!r)return;let i=e.rect.element.width,a=t.length,l=null;if(0===a||r.top<t[0].rect.element.top)return -1;let n=t[0].rect.element,s=n.marginLeft+n.marginRight,o=n.width+s,d=rS(i,o);if(1===d){for(let e=0;e<a;e++){let i=t[e],a=i.rect.outer.top+.5*i.rect.element.height;if(r.top<a)return e}return a}let u=n.marginTop+n.marginBottom,c=n.height+u;for(let e=0;e<a;e++){let t=e%d*o,i=Math.floor(e/d)*c,s=i-n.marginTop,u=t+o,p=i+c+n.marginBottom;if(r.top<p&&r.top>s){if(r.left<u)return e;l=e!==a-1?e:null}}return null!==l?l:a},rw={height:0,width:0,get getHeight(){return this.height},set setHeight(val){(0===this.height||0===val)&&(this.height=val)},get getWidth(){return this.width},set setWidth(val){(0===this.width||0===val)&&(this.width=val)},setDimensions:function(e,t){(0===this.height||0===e)&&(this.height=e),(0===this.width||0===t)&&(this.width=t)}},rb=(e,t,r,i=0,a=1)=>{e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=r,Date.now()>e.spawnDate&&(0===e.opacity&&rM(e,t,r,i,a),e.scaleX=1,e.scaleY=1,e.opacity=1))},rM=(e,t,r,i,a)=>{e.interactionMethod===eT.NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=r):e.interactionMethod===eT.DROP?(e.translateX=null,e.translateX=t-20*i,e.translateY=null,e.translateY=r-10*a,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===eT.BROWSE?(e.translateY=null,e.translateY=r-30):e.interactionMethod===eT.API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},rL=e=>e.rect.element.height+.5*e.rect.element.marginBottom+.5*e.rect.element.marginTop,rP=e=>e.rect.element.width+.5*e.rect.element.marginLeft+.5*e.rect.element.marginRight,rC=U({DID_ADD_ITEM:({root:e,action:t})=>{let{id:r,index:i,interactionMethod:a}=t;e.ref.addIndex=i;let l=Date.now(),n=l,s=1;if(a!==eT.NONE){s=0;let t=e.query("GET_ITEM_INSERT_INTERVAL"),r=l-e.ref.lastItemSpanwDate;n=r<t?l+(t-r):l}e.ref.lastItemSpanwDate=n,e.appendChildView(e.createChildView(rD,{spawnDate:n,id:r,opacity:s,interactionMethod:a}),i)},DID_REMOVE_ITEM:({root:e,action:t})=>{let{id:r}=t,i=e.childViews.find(e=>e.id===r);i&&(i.scaleX=.9,i.scaleY=.9,i.opacity=0,i.markedForRemoval=!0)},DID_DRAG_ITEM:({root:e,action:t})=>{let{id:r,dragState:i}=t,a=e.query("GET_ITEM",{id:r}),l=e.childViews.find(e=>e.id===r),n=e.childViews.length,s=i.getItemIndex(a);if(!l)return;let o={x:l.dragOrigin.x+l.dragOffset.x+l.dragCenter.x,y:l.dragOrigin.y+l.dragOffset.y+l.dragCenter.y},d=rL(l),u=rP(l),c=Math.floor(e.rect.outer.width/u);c>n&&(c=n);let p=Math.floor(n/c+1);rw.setHeight=d*p,rw.setWidth=u*c;var f={y:Math.floor(o.y/d),x:Math.floor(o.x/u),getGridIndex:function(){return o.y>rw.getHeight||o.y<0||o.x>rw.getWidth||o.x<0?s:this.y*c+this.x},getColIndex:function(){let t=e.query("GET_ACTIVE_ITEMS"),r=e.childViews.filter(e=>e.rect.element.height),i=t.map(e=>r.find(t=>t.id===e.id)),a=i.findIndex(e=>e===l),n=rL(l),s=i.length,d=s,u=0,c=0,p=0;for(let e=0;e<s;e++)if(u=rL(i[e]),c=(p=c)+u,o.y<c){if(a>e){if(o.y<p+n){d=e;break}continue}d=e;break}return d}};let E=c>1?f.getGridIndex():f.getColIndex();e.dispatch("MOVE_ITEM",{query:l,index:E});let _=i.getIndex();if(void 0===_||_!==E){if(i.setIndex(E),void 0===_)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:s,target:E})}}}),rN=V({create:({root:e})=>{u(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},write:({root:e,props:t,actions:r,shouldOptimize:i})=>{rC({root:e,props:t,actions:r});let{dragCoordinates:a}=t,l=e.rect.element.width,n=e.childViews.filter(e=>e.rect.element.height),s=e.query("GET_ACTIVE_ITEMS").map(e=>n.find(t=>t.id===e.id)).filter(e=>e),o=a?rv(e,s,a):null,d=e.ref.addIndex||null;e.ref.addIndex=null;let u=0,c=0,p=0;if(0===s.length)return;let f=s[0].rect.element,E=f.marginTop+f.marginBottom,_=f.marginLeft+f.marginRight,m=f.width+_,h=f.height+E,I=rS(l,m);if(1===I){let e=0,t=0;s.forEach((r,a)=>{if(o){let e=a-o;t=-2===e?-(.25*E):-1===e?-(.75*E):0===e?.75*E:1===e?.25*E:0}i&&(r.translateX=null,r.translateY=null),r.markedForRemoval||rb(r,0,e+t);let l=(r.rect.element.height+E)*(r.markedForRemoval?r.opacity:1);e+=l})}else{let e=0,t=0;s.forEach((r,a)=>{a===o&&(u=1),a===d&&(p+=1),r.markedForRemoval&&r.opacity<.5&&(c-=1);let l=a+p+u+c,n=Math.floor(l/I),s=l%I*m,f=n*h,E=Math.sign(s-e),_=Math.sign(f-t);e=s,t=f,r.markedForRemoval||(i&&(r.translateX=null,r.translateY=null),rb(r,s,f,E,_))})}},tag:"ul",name:"list",didWriteView:({root:e})=>{e.childViews.filter(e=>e.markedForRemoval&&0===e.opacity&&e.resting).forEach(t=>{t._destroy(),e.removeChildView(t)})},filterFrameActionsForChild:(e,t)=>t.filter(t=>!t.data||!t.data.id||e.id===t.data.id),mixins:{apis:["dragCoordinates"]}}),rG=U({DID_DRAG:({root:e,props:t,action:r})=>{e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(t.dragCoordinates={left:r.position.scopeLeft-e.ref.list.rect.element.left,top:r.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},DID_END_DRAG:({props:e})=>{e.dragCoordinates=null}}),rx=V({create:({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView(rN)),t.dragCoordinates=null,t.overflowing=!1},write:({root:e,props:t,actions:r})=>{if(rG({root:e,props:t,actions:r}),e.ref.list.dragCoordinates=t.dragCoordinates,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),t.overflow){let r=Math.round(t.overflow);r!==e.height&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=r)}},name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),rV=(e,t,r,i="")=>{r?u(e,t,i):e.removeAttribute(t)},rU=e=>{if(e&&""!==e.value){try{e.value=""}catch(e){}if(e.value){let t=tz("form"),r=e.parentNode,i=e.nextSibling;t.appendChild(e),t.reset(),i?r.insertBefore(e,i):r.appendChild(e)}}},rF=({root:e,action:t})=>{e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&rV(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},rB=({root:e,action:t})=>{rV(e.element,"multiple",t.value)},rk=({root:e,action:t})=>{rV(e.element,"webkitdirectory",t.value)},rq=({root:e})=>{let t=e.query("GET_DISABLED"),r=e.query("GET_ALLOW_BROWSE");rV(e.element,"disabled",t||!r)},rY=({root:e,action:t})=>{t.value?0===e.query("GET_TOTAL_ITEMS")&&rV(e.element,"required",!0):rV(e.element,"required",!1)},rW=({root:e,action:t})=>{rV(e.element,"capture",!!t.value,!0===t.value?"":t.value)},rH=({root:e})=>{let{element:t}=e;e.query("GET_TOTAL_ITEMS")>0?(rV(t,"required",!1),rV(t,"name",!1)):(rV(t,"name",!0,e.query("GET_NAME")),e.query("GET_CHECK_VALIDITY")&&t.setCustomValidity(""),e.query("GET_REQUIRED")&&rV(t,"required",!0))},rX=V({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,u(e.element,"name",e.query("GET_NAME")),u(e.element,"aria-controls",`filepond--assistant-${t.id}`),u(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),rF({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),rB({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),rk({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),rq({root:e}),rY({root:e,action:{value:e.query("GET_REQUIRED")}}),rW({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=r=>{if(!e.element.value)return;let i=Array.from(e.element.files).map(e=>(e._relativePath=e.webkitRelativePath,e));setTimeout(()=>{t.onload(i),rU(e.element)},250)},e.element.addEventListener("change",e.ref.handleChange)},destroy:({root:e})=>{e.element.removeEventListener("change",e.ref.handleChange)},write:U({DID_LOAD_ITEM:rH,DID_REMOVE_ITEM:rH,DID_THROW_ITEM_INVALID:({root:e})=>{e.query("GET_CHECK_VALIDITY")&&e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},DID_SET_DISABLED:rq,DID_SET_ALLOW_BROWSE:rq,DID_SET_ALLOW_DIRECTORIES_ONLY:rk,DID_SET_ALLOW_MULTIPLE:rB,DID_SET_ACCEPTED_FILE_TYPES:rF,DID_SET_CAPTURE_METHOD:rW,DID_SET_REQUIRED:rY})}),r$={ENTER:13,SPACE:32},rj=(e,t)=>{e.innerHTML=t;let r=e.querySelector(".filepond--label-action");return r&&u(r,"tabindex","0"),t},rz=V({name:"drop-label",ignoreRect:!0,create:({root:e,props:t})=>{let r=tz("label");u(r,"for",`filepond--browser-${t.id}`),u(r,"id",`filepond--drop-label-${t.id}`),e.ref.handleKeyDown=t=>{(t.keyCode===r$.ENTER||t.keyCode===r$.SPACE)&&(t.preventDefault(),e.ref.label.click())},e.ref.handleClick=t=>{t.target===r||r.contains(t.target)||e.ref.label.click()},r.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),rj(r,t.caption),e.appendChild(r),e.ref.label=r},destroy:({root:e})=>{e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:U({DID_SET_LABEL_IDLE:({root:e,action:t})=>{rj(e.ref.label,t.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),rQ=V({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),rZ=({root:e})=>{let t=.5*e.rect.element.width,r=.5*e.rect.element.height;e.ref.blob=e.appendChildView(e.createChildView(rQ,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:r}))},rK=U({DID_DRAG:({root:e,action:t})=>{if(!e.ref.blob){rZ({root:e});return}e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1},DID_DROP:({root:e})=>{e.ref.blob&&(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},DID_END_DRAG:({root:e})=>{e.ref.blob&&(e.ref.blob.opacity=0)}}),rJ=V({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:({root:e,props:t,actions:r})=>{rK({root:e,props:t,actions:r});let{blob:i}=e.ref;0===r.length&&i&&0===i.opacity&&(e.removeChildView(i),e.ref.blob=null)}}),r0=(e,t)=>{try{let r=new DataTransfer;t.forEach(e=>{e instanceof File?r.items.add(e):r.items.add(new File([e],e.name,{type:e.type}))}),e.files=r.files}catch(e){return!1}return!0},r1=(e,t)=>e.ref.fields[t],r2=e=>{e.query("GET_ACTIVE_ITEMS").forEach(t=>{e.ref.fields[t.id]&&e.element.appendChild(e.ref.fields[t.id])})},r5=({root:e})=>r2(e),r4=V({tag:"fieldset",name:"data",create:({root:e})=>{e.ref.fields={};let t=document.createElement("legend");t.textContent="Files",e.element.appendChild(t)},write:U({DID_SET_DISABLED:({root:e})=>{e.element.disabled=e.query("GET_DISABLED")},DID_ADD_ITEM:({root:e,action:t})=>{let r=e.query("GET_ITEM",t.id).origin!==eb.LOCAL&&e.query("SHOULD_UPDATE_FILE_INPUT"),i=tz("input");i.type=r?"file":"hidden",i.name=e.query("GET_NAME"),e.ref.fields[t.id]=i,r2(e)},DID_LOAD_ITEM:({root:e,action:t})=>{let r=r1(e,t.id);r&&(null!==t.serverFileReference&&(r.value=t.serverFileReference),e.query("SHOULD_UPDATE_FILE_INPUT")&&r0(r,[e.query("GET_ITEM",t.id).file]))},DID_REMOVE_ITEM:({root:e,action:t})=>{let r=r1(e,t.id);r&&(r.parentNode&&r.parentNode.removeChild(r),delete e.ref.fields[t.id])},DID_DEFINE_VALUE:({root:e,action:t})=>{let r=r1(e,t.id);r&&(null===t.value?r.removeAttribute("value"):"file"!=r.type&&(r.value=t.value),r2(e))},DID_PREPARE_OUTPUT:({root:e,action:t})=>{e.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{let r=r1(e,t.id);r&&r0(r,[t.file])},0)},DID_REORDER_ITEMS:r5,DID_SORT_ITEMS:r5}),ignoreRect:!0}),r3=e=>"getRootNode"in e?e.getRootNode():document,r9=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],r6=["css","csv","html","txt"],r8={zip:"zip|compressed",epub:"application/epub+zip"},r7=(e="")=>(e=e.toLowerCase(),r9.includes(e))?"image/"+("jpg"===e?"jpeg":"svg"===e?"svg+xml":e):r6.includes(e)?"text/"+e:r8[e]||"",ie=e=>new Promise((t,r)=>{let i=ic(e);if(i.length&&!it(e))return t(i);ir(e).then(t)}),it=e=>!!e.files&&e.files.length>0,ir=e=>new Promise((t,r)=>{let i=(e.items?Array.from(e.items):[]).filter(e=>ii(e)).map(e=>ia(e));if(!i.length){t(e.files?Array.from(e.files):[]);return}Promise.all(i).then(e=>{let r=[];e.forEach(e=>{r.push.apply(r,e)}),t(r.filter(e=>e).map(e=>(e._relativePath||(e._relativePath=e.webkitRelativePath),e)))}).catch(console.error)}),ii=e=>{if(id(e)){let t=iu(e);if(t)return t.isFile||t.isDirectory}return"file"===e.kind},ia=e=>new Promise((t,r)=>{if(io(e)){il(iu(e)).then(t).catch(r);return}t([e.getAsFile()])}),il=e=>new Promise((t,r)=>{let i=[],a=0,l=0,n=()=>{0===l&&0===a&&t(i)},s=e=>{a++;let t=e.createReader(),o=()=>{t.readEntries(e=>{if(0===e.length){a--,n();return}e.forEach(e=>{e.isDirectory?s(e):(l++,e.file(t=>{let r=is(t);e.fullPath&&(r._relativePath=e.fullPath),i.push(r),l--,n()}))}),o()},r)};o()};s(e)}),is=e=>{if(e.type.length)return e;let t=e.lastModifiedDate,r=e.name,i=r7(e6(e.name));return i.length&&((e=e.slice(0,e.size,i)).name=r,e.lastModifiedDate=t),e},io=e=>id(e)&&(iu(e)||{}).isDirectory,id=e=>"webkitGetAsEntry"in e,iu=e=>e.webkitGetAsEntry(),ic=e=>{let t=[];try{if((t=iE(e)).length)return t;t=ip(e)}catch(e){}return t},ip=e=>{let t=e.getData("url");return"string"==typeof t&&t.length?[t]:[]},iE=e=>{let t=e.getData("text/html");if("string"==typeof t&&t.length){let e=t.match(/src\s*=\s*"(.+?)"/);if(e)return[e[1]]}return[]},i_=[],im=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}),ih=(e,t,r)=>{let i=iI(t),a={element:e,filterElement:r,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return a.destroy=i.addListener(a),a},iI=e=>{let t=i_.find(t=>t.element===e);if(t)return t;let r=iT(e);return i_.push(r),r},iT=e=>{let t=[],r={dragenter:iO,dragover:iD,dragleave:iv,drop:iS},i={};o(r,(r,a)=>{i[r]=a(e,t),e.addEventListener(r,i[r],!1)});let a={element:e,addListener:l=>(t.push(l),()=>{t.splice(t.indexOf(l),1),0===t.length&&(i_.splice(i_.indexOf(a),1),o(r,t=>{e.removeEventListener(t,i[t],!1)}))})};return a},ig=(e,t)=>("elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)),iy=(e,t)=>{let r=ig(r3(t),{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return r===t||t.contains(r)},iR=null,iA=(e,t)=>{try{e.dropEffect=t}catch(e){}},iO=(e,t)=>e=>{e.preventDefault(),iR=e.target,t.forEach(t=>{let{element:r,onenter:i}=t;iy(e,r)&&(t.state="enter",i(im(e)))})},iD=(e,t)=>e=>{e.preventDefault();let r=e.dataTransfer;ie(r).then(i=>{let a=!1;t.some(t=>{let{filterElement:l,element:n,onenter:s,onexit:o,ondrag:d,allowdrop:u}=t;iA(r,"copy");let c=u(i);if(!c){iA(r,"none");return}if(iy(e,n)){if(a=!0,null===t.state){t.state="enter",s(im(e));return}if(t.state="over",l&&!c){iA(r,"none");return}d(im(e))}else l&&!a&&iA(r,"none"),t.state&&(t.state=null,o(im(e)))})})},iS=(e,t)=>e=>{e.preventDefault(),ie(e.dataTransfer).then(r=>{t.forEach(t=>{let{filterElement:i,element:a,ondrop:l,onexit:n,allowdrop:s}=t;if(t.state=null,!i||iy(e,a)){if(!s(r))return n(im(e));l(im(e),r)}})})},iv=(e,t)=>e=>{iR===e.target&&t.forEach(t=>{let{onexit:r}=t;t.state=null,r(im(e))})},iw=(e,t,r)=>{e.classList.add("filepond--hopper");let{catchesDropsOnPage:i,requiresDropOnElement:a,filterItems:l=e=>e}=r,n=ih(e,i?document.documentElement:e,a),s="",o="";n.allowdrop=e=>t(l(e)),n.ondrop=(e,r)=>{let i=l(r);if(!t(i)){d.ondragend(e);return}o="drag-drop",d.onload(i,e)},n.ondrag=e=>{d.ondrag(e)},n.onenter=e=>{o="drag-over",d.ondragstart(e)},n.onexit=e=>{o="drag-exit",d.ondragend(e)};let d={updateHopperState:()=>{s!==o&&(e.dataset.hopperState=o,s=o)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{n.destroy()}};return d},ib=!1,iM=[],iL=e=>{let t=document.activeElement;if(t&&(/textarea|input/i.test(t.nodeName)||"true"===t.getAttribute("contenteditable"))){let e=!1,r=t;for(;r!==document.body;){if(r.classList.contains("filepond--root")){e=!0;break}r=r.parentNode}if(!e)return}ie(e.clipboardData).then(e=>{e.length&&iM.forEach(t=>t(e))})},iP=e=>{!iM.includes(e)&&(iM.push(e),ib||(ib=!0,document.addEventListener("paste",iL)))},iC=e=>{ey(iM,iM.indexOf(e)),0===iM.length&&(document.removeEventListener("paste",iL),ib=!1)},iN=()=>{let e=e=>{t.onload(e)},t={destroy:()=>{iC(e)},onload:()=>{}};return iP(e),t},iG=null,ix=null,iV=[],iU=(e,t)=>{e.element.textContent=t},iF=e=>{e.element.textContent=""},iB=(e,t,r)=>{let i=e.query("GET_TOTAL_ITEMS");iU(e,`${r} ${t}, ${i} ${1===i?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(ix),ix=setTimeout(()=>{iF(e)},1500)},ik=e=>e.element.parentNode.contains(document.activeElement),iq=({root:e,action:t})=>{let r=e.query("GET_ITEM",t.id).filename,i=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");iU(e,`${r} ${i}`)},iY=({root:e,action:t})=>{let r=e.query("GET_ITEM",t.id).filename;iU(e,`${t.status.main} ${r} ${t.status.sub}`)},iW=V({create:({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,u(e.element,"role","alert"),u(e.element,"aria-live","polite"),u(e.element,"aria-relevant","additions")},ignoreRect:!0,ignoreRectUpdate:!0,write:U({DID_LOAD_ITEM:({root:e,action:t})=>{if(!ik(e))return;e.element.textContent="";let r=e.query("GET_ITEM",t.id);iV.push(r.filename),clearTimeout(iG),iG=setTimeout(()=>{iB(e,iV.join(", "),e.query("GET_LABEL_FILE_ADDED")),iV.length=0},750)},DID_REMOVE_ITEM:({root:e,action:t})=>{ik(e)&&iB(e,t.item.filename,e.query("GET_LABEL_FILE_REMOVED"))},DID_COMPLETE_ITEM_PROCESSING:({root:e,action:t})=>{let r=e.query("GET_ITEM",t.id).filename,i=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");iU(e,`${r} ${i}`)},DID_ABORT_ITEM_PROCESSING:iq,DID_REVERT_ITEM_PROCESSING:iq,DID_THROW_ITEM_REMOVE_ERROR:iY,DID_THROW_ITEM_LOAD_ERROR:iY,DID_THROW_ITEM_INVALID:iY,DID_THROW_ITEM_PROCESSING_ERROR:iY}),tag:"span",name:"assistant"}),iH=(e,t="-")=>e.replace(RegExp(`${t}.`,"g"),e=>e.charAt(1).toUpperCase()),iX=(e,t=16,r=!0)=>{let i=Date.now(),a=null;return(...l)=>{clearTimeout(a);let n=Date.now()-i,s=()=>{i=Date.now(),e(...l)};n<t?r||(a=setTimeout(s,t-n)):s()}},i$=e=>e.preventDefault(),ij=e=>{let t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},iz=e=>{let t=0,r=0,i=e.ref.list,a=i.childViews[0],l=a.childViews.filter(e=>e.rect.element.height),n=e.query("GET_ACTIVE_ITEMS").map(e=>l.find(t=>t.id===e.id)).filter(e=>e);if(0===n.length)return{visual:t,bounds:r};let s=a.rect.element.width,o=rv(a,n,i.dragCoordinates),d=n[0].rect.element,u=d.marginTop+d.marginBottom,c=d.marginLeft+d.marginRight,p=d.width+c,f=d.height+u,E=n.find(e=>e.markedForRemoval&&e.opacity<.45)?-1:0,_=n.length+(void 0!==o&&o>=0?1:0)+E,m=rS(s,p);return 1===m?n.forEach(e=>{let i=e.rect.element.height+u;r+=i,t+=i*e.opacity}):t=r=Math.ceil(_/m)*f,{visual:t,bounds:r}},iQ=e=>{let t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:0===t?null:t}},iZ=(e,t)=>{let r=e.query("GET_ALLOW_REPLACE"),i=e.query("GET_ALLOW_MULTIPLE"),a=e.query("GET_TOTAL_ITEMS"),l=e.query("GET_MAX_FILES"),n=t.length;return!i&&n>1?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:th("warning",0,"Max files")}),!0):(l=i?l:1,(!!i||!r)&&!!Z(l)&&a+n>l&&(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:th("warning",0,"Max files")}),!0))},iK=(e,t,r)=>{let i=e.childViews[0];return rv(i,t,{left:r.scopeLeft-i.rect.element.left,top:r.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},iJ=e=>{let t=e.query("GET_ALLOW_DROP"),r=e.query("GET_DISABLED"),i=t&&!r;if(i&&!e.ref.hopper){let t=iw(e.element,t=>{let r=e.query("GET_BEFORE_DROP_FILE")||(()=>!0);return!e.query("GET_DROP_VALIDATION")||t.every(t=>eG("ALLOW_HOPPER_ITEM",t,{query:e.query}).every(e=>!0===e)&&r(t))},{filterItems:t=>{let r=e.query("GET_IGNORED_FILES");return t.filter(e=>!tP(e)||!r.includes(e.name.toLowerCase()))},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});t.onload=(t,r)=>{let i=e.ref.list.childViews[0].childViews.filter(e=>e.rect.element.height),a=e.query("GET_ACTIVE_ITEMS").map(e=>i.find(t=>t.id===e.id)).filter(e=>e);eN("ADD_ITEMS",t,{dispatch:e.dispatch}).then(t=>{if(iZ(e,t))return!1;e.dispatch("ADD_ITEMS",{items:t,index:iK(e.ref.list,a,r),interactionMethod:eT.DROP})}),e.dispatch("DID_DROP",{position:r}),e.dispatch("DID_END_DRAG",{position:r})},t.ondragstart=t=>{e.dispatch("DID_START_DRAG",{position:t})},t.ondrag=iX(t=>{e.dispatch("DID_DRAG",{position:t})}),t.ondragend=t=>{e.dispatch("DID_END_DRAG",{position:t})},e.ref.hopper=t,e.ref.drip=e.appendChildView(e.createChildView(rJ))}else!i&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},i0=(e,t)=>{let r=e.query("GET_ALLOW_BROWSE"),i=e.query("GET_DISABLED"),a=r&&!i;a&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(rX,{...t,onload:t=>{eN("ADD_ITEMS",t,{dispatch:e.dispatch}).then(t=>{if(iZ(e,t))return!1;e.dispatch("ADD_ITEMS",{items:t,index:-1,interactionMethod:eT.BROWSE})})}}),0):!a&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},i1=e=>{let t=e.query("GET_ALLOW_PASTE"),r=e.query("GET_DISABLED"),i=t&&!r;i&&!e.ref.paster?(e.ref.paster=iN(),e.ref.paster.onload=t=>{eN("ADD_ITEMS",t,{dispatch:e.dispatch}).then(t=>{if(iZ(e,t))return!1;e.dispatch("ADD_ITEMS",{items:t,index:-1,interactionMethod:eT.PASTE})})}):!i&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},i2=U({DID_SET_ALLOW_BROWSE:({root:e,props:t})=>{i0(e,t)},DID_SET_ALLOW_DROP:({root:e})=>{iJ(e)},DID_SET_ALLOW_PASTE:({root:e})=>{i1(e)},DID_SET_DISABLED:({root:e,props:t})=>{iJ(e),i1(e),i0(e,t),e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),i5=V({name:"root",read:({root:e})=>{e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:({root:e,props:t})=>{let r=e.query("GET_ID");r&&(e.element.id=r);let i=e.query("GET_CLASS_NAME");i&&i.split(" ").filter(e=>e.length).forEach(t=>{e.element.classList.add(t)}),e.ref.label=e.appendChildView(e.createChildView(rz,{...t,translateY:null,caption:e.query("GET_LABEL_IDLE")})),e.ref.list=e.appendChildView(e.createChildView(rx,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(rT,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(iW,{...t})),e.ref.data=e.appendChildView(e.createChildView(r4,{...t})),e.ref.measure=tz("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter(e=>!q(e.value)).map(({name:t,value:r})=>{e.element.dataset[t]=r}),e.ref.widthPrevious=null,e.ref.widthUpdated=iX(()=>{e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")},250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];let a=window.matchMedia("(pointer: fine) and (hover: hover)").matches,l="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&l&&!a&&(e.element.addEventListener("touchmove",i$,{passive:!1}),e.element.addEventListener("gesturestart",i$));let n=e.query("GET_CREDITS");if(2===n.length){let t=document.createElement("a");t.className="filepond--credits",t.href=n[0],t.tabIndex=-1,t.target="_blank",t.rel="noopener noreferrer nofollow",t.textContent=n[1],e.element.appendChild(t),e.ref.credits=t}},write:({root:e,props:t,actions:r})=>{if(i2({root:e,props:t,actions:r}),r.filter(e=>/^DID_SET_STYLE_/.test(e.type)).filter(e=>!q(e.data.value)).map(({type:t,data:r})=>{let i=iH(t.substring(8).toLowerCase(),"_");e.element.dataset[i]=r.value,e.invalidateLayout()}),e.rect.element.hidden)return;e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());let i=e.ref.bounds;i||(i=e.ref.bounds=iQ(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);let{hopper:a,label:l,list:n,panel:s}=e.ref;a&&a.updateHopperState();let o=e.query("GET_PANEL_ASPECT_RATIO"),d=e.query("GET_ALLOW_MULTIPLE"),u=e.query("GET_TOTAL_ITEMS"),c=u===(d?e.query("GET_MAX_FILES")||1e6:1),p=r.find(e=>"DID_ADD_ITEM"===e.type);if(c&&p){let e=p.data.interactionMethod;l.opacity=0,d?l.translateY=-40:e===eT.API?l.translateX=40:e===eT.BROWSE?l.translateY=40:l.translateY=30}else c||(l.opacity=1,l.translateX=0,l.translateY=0);let f=ij(e),E=iz(e),_=l.rect.element.height,m=!d||c?0:_,h=c?n.rect.element.marginTop:0,I=0===u?0:n.rect.element.marginBottom,T=m+h+E.visual+I,g=m+h+E.bounds+I;if(n.translateY=Math.max(0,m-n.rect.element.marginTop)-f.top,o){let t=e.rect.element.width,r=t*o;o!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=o,e.ref.updateHistory=[]);let i=e.ref.updateHistory;if(i.push(t),i.length>4){let e=i.length,t=e-10,r=0;for(let a=e;a>=t;a--)if(i[a]===i[a-2]&&r++,r>=2)return}s.scalable=!1,s.height=r;let a=r-m-(I-f.bottom)-(c?h:0);E.visual>a?n.overflow=a:n.overflow=null,e.height=r}else if(i.fixedHeight){s.scalable=!1;let e=i.fixedHeight-m-(I-f.bottom)-(c?h:0);E.visual>e?n.overflow=e:n.overflow=null}else if(i.cappedHeight){let t=T>=i.cappedHeight,r=Math.min(i.cappedHeight,T);s.scalable=!0,s.height=t?r:r-f.top-f.bottom;let a=r-m-(I-f.bottom)-(c?h:0);T>i.cappedHeight&&E.visual>a?n.overflow=a:n.overflow=null,e.height=Math.min(i.cappedHeight,g-f.top-f.bottom)}else{let t=u>0?f.top+f.bottom:0;s.scalable=!0,s.height=Math.max(_,T-t),e.height=Math.max(_,g-t)}e.ref.credits&&s.heightCurrent&&(e.ref.credits.style.transform=`translateY(${s.heightCurrent}px)`)},destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",i$),e.element.removeEventListener("gesturestart",i$)},mixins:{styles:["height"]}}),i4=(e={})=>{let t=null,r=eU(),i=n(eE(r),[e0,eI(r)],[tX,eh(r)]);i.dispatch("SET_OPTIONS",{options:e});let a=()=>{document.hidden||i.dispatch("KICK")};document.addEventListener("visibilitychange",a);let l=null,s=!1,o=!1,u=null,c=null,p=()=>{s||(s=!0),clearTimeout(l),l=setTimeout(()=>{s=!1,u=null,c=null,o&&(o=!1,i.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",p);let f=i5(i,{id:eg()}),E=!1,_=!1,m=e=>t=>{let r={type:e};if(!t)return r;if(t.hasOwnProperty("error")&&(r.error=t.error?{...t.error}:null),t.status&&(r.status={...t.status}),t.file&&(r.output=t.file),t.source)r.file=t.source;else if(t.item||t.id){let e=t.item?t.item:i.query("GET_ITEM",t.id);r.file=e?eS(e):null}return t.items&&(r.items=t.items.map(eS)),/progress/.test(e)&&(r.progress=t.progress),t.hasOwnProperty("origin")&&t.hasOwnProperty("target")&&(r.origin=t.origin,r.target=t.target),r},h={DID_DESTROY:m("destroy"),DID_INIT:m("init"),DID_THROW_MAX_FILES:m("warning"),DID_INIT_ITEM:m("initfile"),DID_START_ITEM_LOAD:m("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:m("addfileprogress"),DID_LOAD_ITEM:m("addfile"),DID_THROW_ITEM_INVALID:[m("error"),m("addfile")],DID_THROW_ITEM_LOAD_ERROR:[m("error"),m("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[m("error"),m("removefile")],DID_PREPARE_OUTPUT:m("preparefile"),DID_START_ITEM_PROCESSING:m("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:m("processfileprogress"),DID_ABORT_ITEM_PROCESSING:m("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:m("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:m("processfiles"),DID_REVERT_ITEM_PROCESSING:m("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[m("error"),m("processfile")],DID_REMOVE_ITEM:m("removefile"),DID_UPDATE_ITEMS:m("updatefiles"),DID_ACTIVATE_ITEM:m("activatefile"),DID_REORDER_ITEMS:m("reorderfiles")},I=e=>{let t={pond:v,...e};delete t.type,f.element.dispatchEvent(new CustomEvent(`FilePond:${e.type}`,{detail:t,bubbles:!0,cancelable:!0,composed:!0}));let r=[];e.hasOwnProperty("error")&&r.push(e.error),e.hasOwnProperty("file")&&r.push(e.file);let a=["type","error","file"];Object.keys(e).filter(e=>!a.includes(e)).forEach(t=>r.push(e[t])),v.fire(e.type,...r);let l=i.query(`GET_ON${e.type.toUpperCase()}`);l&&l(...r)},T=e=>{e.length&&e.filter(e=>h[e.type]).forEach(e=>{let t=h[e.type];(Array.isArray(t)?t:[t]).forEach(t=>{"DID_INIT_ITEM"===e.type?I(t(e.data)):setTimeout(()=>{I(t(e.data))},0)})})},g=e=>new Promise((t,r)=>{i.dispatch("REQUEST_ITEM_PREPARE",{query:e,success:e=>{t(e)},failure:e=>{r(e)}})}),y=e=>e.file&&e.id,R=(e,t)=>("object"!=typeof e||y(e)||t||(t=e,e=void 0),i.dispatch("REMOVE_ITEM",{...t,query:e}),null===i.query("GET_ACTIVE_ITEM",e)),O=(...e)=>new Promise((t,r)=>{let a=[],l={};if(k(e[0]))a.push.apply(a,e[0]),Object.assign(l,e[1]||{});else{let t=e[e.length-1];"object"!=typeof t||t instanceof Blob||Object.assign(l,e.pop()),a.push(...e)}i.dispatch("ADD_ITEMS",{items:a,index:l.index,interactionMethod:eT.API,success:t,failure:r})}),D=()=>i.query("GET_ACTIVE_ITEMS"),S=e=>new Promise((t,r)=>{i.dispatch("REQUEST_ITEM_PROCESSING",{query:e,success:e=>{t(e)},failure:e=>{r(e)}})}),v={...eA(),_read:()=>{s&&(c=window.innerWidth,u||(u=c),o||c===u||(i.dispatch("DID_START_RESIZE"),o=!0)),_&&E&&(E=null===f.element.offsetParent),E||(f._read(),_=f.rect.element.hidden)},_write:e=>{let t=i.processActionQueue().filter(e=>!/^SET_/.test(e.type));(!E||t.length)&&(T(t),E=f._write(e,t,o),ev(i.query("GET_ITEMS")),E&&i.processDispatchQueue())},...em(i,r),setOptions:e=>i.dispatch("SET_OPTIONS",{options:e}),addFile:(e,t={})=>new Promise((r,i)=>{O([{source:e,options:t}],{index:t.index}).then(e=>r(e&&e[0])).catch(i)}),addFiles:O,getFile:e=>i.query("GET_ACTIVE_ITEM",e),processFile:S,prepareFile:g,removeFile:R,moveFile:(e,t)=>i.dispatch("MOVE_ITEM",{query:e,index:t}),getFiles:D,processFiles:(...e)=>{let t=Array.isArray(e[0])?e[0]:e;return t.length?Promise.all(t.map(S)):Promise.all(D().filter(e=>!(e.status===ew.IDLE&&e.origin===eb.LOCAL)&&e.status!==ew.PROCESSING&&e.status!==ew.PROCESSING_COMPLETE&&e.status!==ew.PROCESSING_REVERT_ERROR).map(S))},removeFiles:(...e)=>{let t;let r=Array.isArray(e[0])?e[0]:e;"object"==typeof r[r.length-1]?t=r.pop():Array.isArray(e[0])&&(t=e[1]);let i=D();return r.length?r.map(e=>A(e)?i[e]?i[e].id:null:e).filter(e=>e).map(e=>R(e,t)):Promise.all(i.map(e=>R(e,t)))},prepareFiles:(...e)=>{let t=Array.isArray(e[0])?e[0]:e;return Promise.all((t.length?t:D()).map(g))},sort:e=>i.dispatch("SORT",{compare:e}),browse:()=>{var e=f.element.querySelector("input[type=file]");e&&e.click()},destroy:()=>{v.fire("destroy",f.element),i.dispatch("ABORT_ALL"),f._destroy(),window.removeEventListener("resize",p),document.removeEventListener("visibilitychange",a),i.dispatch("DID_DESTROY")},insertBefore:e=>F(f.element,e),insertAfter:e=>B(f.element,e),appendTo:e=>e.appendChild(f.element),replaceElement:e=>{F(f.element,e),e.parentNode.removeChild(e),t=e},restoreElement:()=>{t&&(B(t,f.element),f.element.parentNode.removeChild(f.element),t=null)},isAttachedTo:e=>f.element===e||t===e,element:{get:()=>f.element},status:{get:()=>i.query("GET_STATUS")}};return i.dispatch("DID_INIT"),d(v)},i3=(e={})=>{let t={};return o(eU(),(e,r)=>{t[e]=r[0]}),i4({...t,...e})},i9=e=>e.charAt(0).toLowerCase()+e.slice(1),i6=e=>iH(e.replace(/^data-/,"")),i8=(e,t)=>{o(t,(t,r)=>{o(e,(i,a)=>{let l=new RegExp(t);if(!l.test(i)||(delete e[i],!1===r))return;if($(r)){e[r]=a;return}let n=r.group;el(r)&&!e[n]&&(e[n]={}),e[n][i9(i.replace(l,""))]=a}),r.mapping&&i8(e[r.group],r.mapping)})},i7=(e,t={})=>{let r=[];o(e.attributes,t=>{r.push(e.attributes[t])});let i=r.filter(e=>e.name).reduce((t,r)=>{let i=u(e,r.name);return t[i6(r.name)]=i===r.name||i,t},{});return i8(i,t),i},ae=(e,t={})=>{let r={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};eG("SET_ATTRIBUTE_TO_OPTION_MAP",r);let i={...t},a=i7("FIELDSET"===e.nodeName?e.querySelector("input[type=file]"):e,r);Object.keys(a).forEach(e=>{el(a[e])?(el(i[e])||(i[e]={}),Object.assign(i[e],a[e])):i[e]=a[e]}),i.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map(e=>({source:e.value,options:{type:e.dataset.type}})));let l=i3(i);return e.files&&Array.from(e.files).forEach(e=>{l.addFile(e)}),l.replaceElement(e),l},at=(...e)=>l(e[0])?ae(...e):i3(...e),ar=["fire","_read","_write"],ai=e=>{let t={};return eO(e,t,ar),t},aa=(e,t)=>e.replace(/(?:{([a-zA-Z]+)})/g,(e,r)=>t[r]),al=e=>{let t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),r=URL.createObjectURL(t),i=new Worker(r);return{transfer:(e,t)=>{},post:(e,t,r)=>{let a=eg();i.onmessage=e=>{e.data.id===a&&t(e.data.message)},i.postMessage({id:a,message:e},r)},terminate:()=>{i.terminate(),URL.revokeObjectURL(r)}}},an=e=>new Promise((t,r)=>{let i=new Image;i.onload=()=>{t(i)},i.onerror=e=>{r(e)},i.src=e}),as=(e,t)=>{let r=e.slice(0,e.size,e.type);return r.lastModifiedDate=e.lastModifiedDate,r.name=t,r},ao=e=>as(e,e.name),ad=[],au=e=>{ad.includes(e)||(ad.push(e),eV(e({addFilter:ex,utils:{Type:eP,forin:o,isString:$,isFile:tP,toNaturalFileSize:t2,replaceInString:aa,getExtensionFromFilename:e6,getFilenameWithoutExtension:tM,guesstimateMimeType:r7,getFileFromBlob:tt,getFilenameFromURL:e9,createRoute:U,createWorker:al,createView:V,createItemAPI:eS,loadImage:an,copyFile:ao,renameFile:as,createBlob:ti,applyFilterChain:eN,text:tQ,getNumericAspectRatioFromString:eq},views:{fileActionButton:t1}}).options))},ac=()=>"[object OperaMini]"===Object.prototype.toString.call(window.operamini),ap=()=>"Promise"in window,af=()=>"slice"in Blob.prototype,aE=()=>"URL"in window&&"createObjectURL"in window.URL,a_=()=>"visibilityState"in document,am=()=>"performance"in window,ah=()=>"supports"in(window.CSS||{}),aI=()=>/MSIE|Trident/.test(window.navigator.userAgent),aT=(()=>{let e=I()&&!ac()&&a_()&&ap()&&af()&&aE()&&am()&&(ah()||aI());return()=>e})(),ag={apps:[]},ay=()=>{},aR={},aA=ay,aO=ay,aD=ay,aS=ay,av=ay,aw=ay,ab=ay;if(aT()){((e,t,r=60)=>{let i="__framePainter";if(window[i]){window[i].readers.push(e),window[i].writers.push(t);return}window[i]={readers:[e],writers:[t]};let a=window[i],l=1e3/r,n=null,s=null,o=null,d=null,u=()=>{document.hidden?(o=()=>window.setTimeout(()=>c(performance.now()),l),d=()=>window.clearTimeout(s)):(o=()=>window.requestAnimationFrame(c),d=()=>window.cancelAnimationFrame(s))};document.addEventListener("visibilitychange",()=>{d&&d(),u(),c(performance.now())});let c=e=>{s=o(c),n||(n=e);let t=e-n;t<=l||(n=e-t%l,a.readers.forEach(e=>e()),a.writers.forEach(t=>t(e)))};return u(),c(performance.now())})(()=>{ag.apps.forEach(e=>e._read())},e=>{ag.apps.forEach(t=>t._write(e))});let e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:aT,create:aA,destroy:aO,parse:aD,find:aS,registerPlugin:av,setOptions:ab}})),document.removeEventListener("DOMContentLoaded",e)};"loading"!==document.readyState?setTimeout(()=>e(),0):document.addEventListener("DOMContentLoaded",e);let t=()=>o(eU(),(e,t)=>{aR[e]=t[1]});aR={},t(),aA=(...e)=>{let t=at(...e);return t.on("destroy",aO),ag.apps.push(t),ai(t)},aO=e=>{let t=ag.apps.findIndex(t=>t.isAttachedTo(e));return t>=0&&(ag.apps.splice(t,1)[0].restoreElement(),!0)},aD=e=>Array.from(e.querySelectorAll(".filepond")).filter(e=>!ag.apps.find(t=>t.isAttachedTo(e))).map(e=>aA(e)),aS=e=>{let t=ag.apps.find(t=>t.isAttachedTo(e));return t?ai(t):null},av=(...e)=>{e.forEach(au),t()},aw=()=>{let e={};return o(eU(),(t,r)=>{e[t]=r[0]}),e},ab=e=>(el(e)&&(ag.apps.forEach(t=>{t.setOptions(e)}),eF(e)),aw())}let aM=aT(),aL=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"];class aP extends a().Component{constructor(e){super(e),this.allowFilesSync=!0}componentDidMount(){if(this._input=this._element.querySelector('input[type="file"]'),this._inputClone=this._input.cloneNode(),!aM)return;let e=Object.assign({},this.props);if(e.onupdatefiles){let t=e.onupdatefiles;e.onupdatefiles=e=>{this.allowFilesSync=!1,t(e)}}this._pond=aA(this._input,e),Object.keys(this._pond).filter(e=>!aL.includes(e)).forEach(e=>{this[e]=this._pond[e]})}componentWillUnmount(){if(!this._pond)return;let e=document.createElement("div");e.append(this._pond.element),e.id="foo",this._pond.destroy(),this._pond=void 0,this._element.append(this._inputClone)}shouldComponentUpdate(){return!!this.allowFilesSync||(this.allowFilesSync=!0,!1)}componentDidUpdate(){if(!this._pond)return;let e=Object.assign({},this.props);delete e.onupdatefiles,this._pond.setOptions(e)}render(){let{id:e,name:t,className:r,allowMultiple:a,required:l,captureMethod:n,acceptedFileTypes:s}=this.props;return(0,i.createElement)("div",{className:"filepond--wrapper",ref:e=>this._element=e},(0,i.createElement)("input",{type:"file",name:t,id:e,accept:s,multiple:a,required:l,className:r,capture:n}))}}},78034:()=>{},96079:()=>{},74064:(e,t,r)=>{"use strict";r.d(t,{F:()=>d});var i=r(74723);let a=(e,t,r)=>{if(e&&"reportValidity"in e){let a=(0,i.U2)(r,t);e.setCustomValidity(a&&a.message||""),e.reportValidity()}},l=(e,t)=>{for(let r in t.fields){let i=t.fields[r];i&&i.ref&&"reportValidity"in i.ref?a(i.ref,r,e):i.refs&&i.refs.forEach(t=>a(t,r,e))}},n=(e,t)=>{t.shouldUseNativeValidation&&l(e,t);let r={};for(let a in e){let l=(0,i.U2)(t.fields,a),n=Object.assign(e[a]||{},{ref:l&&l.ref});if(s(t.names||Object.keys(e),a)){let e=Object.assign({},(0,i.U2)(r,a));(0,i.t8)(e,"root",n),(0,i.t8)(r,a,e)}else(0,i.t8)(r,a,n)}return r},s=(e,t)=>e.some(e=>e.startsWith(t+"."));var o=function(e,t){for(var r={};e.length;){var a=e[0],l=a.code,n=a.message,s=a.path.join(".");if(!r[s]){if("unionErrors"in a){var o=a.unionErrors[0].errors[0];r[s]={message:o.message,type:o.code}}else r[s]={message:n,type:l}}if("unionErrors"in a&&a.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var d=r[s].types,u=d&&d[a.code];r[s]=(0,i.KN)(s,t,r,l,u?[].concat(u,a.message):a.message)}e.shift()}return r},d=function(e,t,r){return void 0===r&&(r={}),function(i,a,s){try{return Promise.resolve(function(a,n){try{var o=Promise.resolve(e["sync"===r.mode?"parse":"parseAsync"](i,t)).then(function(e){return s.shouldUseNativeValidation&&l({},s),{errors:{},values:r.raw?i:e}})}catch(e){return n(e)}return o&&o.then?o.then(void 0,n):o}(0,function(e){if(Array.isArray(null==e?void 0:e.errors))return{values:{},errors:n(o(e.errors,!s.shouldUseNativeValidation&&"all"===s.criteriaMode),s)};throw e}))}catch(e){return Promise.reject(e)}}}},34478:(e,t,r)=>{"use strict";r.d(t,{f:()=>s});var i=r(17266),a=r(45226),l=r(68819),n=i.forwardRef((e,t)=>(0,l.jsx)(a.WV.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var s=n},41959:(e,t,r)=>{"use strict";r.d(t,{bU:()=>A,fC:()=>R});var i=r(17266),a=r(82561),l=r(48051),n=r(93095),s=r(52067),o=r(53405),d=r(2566),u=r(45226),c=r(68819),p="Switch",[f,E]=(0,n.b)(p),[_,m]=f(p),h=i.forwardRef((e,t)=>{let{__scopeSwitch:r,name:n,checked:o,defaultChecked:d,required:p,disabled:f,value:E="on",onCheckedChange:m,form:h,...I}=e,[T,R]=i.useState(null),A=(0,l.e)(t,e=>R(e)),O=i.useRef(!1),D=!T||h||!!T.closest("form"),[S=!1,v]=(0,s.T)({prop:o,defaultProp:d,onChange:m});return(0,c.jsxs)(_,{scope:r,checked:S,disabled:f,children:[(0,c.jsx)(u.WV.button,{type:"button",role:"switch","aria-checked":S,"aria-required":p,"data-state":y(S),"data-disabled":f?"":void 0,disabled:f,value:E,...I,ref:A,onClick:(0,a.M)(e.onClick,e=>{v(e=>!e),D&&(O.current=e.isPropagationStopped(),O.current||e.stopPropagation())})}),D&&(0,c.jsx)(g,{control:T,bubbles:!O.current,name:n,value:E,checked:S,required:p,disabled:f,form:h,style:{transform:"translateX(-100%)"}})]})});h.displayName=p;var I="SwitchThumb",T=i.forwardRef((e,t)=>{let{__scopeSwitch:r,...i}=e,a=m(I,r);return(0,c.jsx)(u.WV.span,{"data-state":y(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t})});T.displayName=I;var g=e=>{let{control:t,checked:r,bubbles:a=!0,...l}=e,n=i.useRef(null),s=(0,o.D)(r),u=(0,d.t)(t);return i.useEffect(()=>{let e=n.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(s!==r&&t){let i=new Event("click",{bubbles:a});t.call(e,r),e.dispatchEvent(i)}},[s,r,a]),(0,c.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...l,tabIndex:-1,ref:n,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function y(e){return e?"checked":"unchecked"}var R=h,A=T},74723:(e,t,r)=>{"use strict";r.d(t,{Dq:()=>ef,Gc:()=>S,KN:()=>V,Qr:()=>x,RV:()=>v,U2:()=>h,cI:()=>eN,t8:()=>y});var i=r(17266),a=e=>"checkbox"===e.type,l=e=>e instanceof Date,n=e=>null==e;let s=e=>"object"==typeof e;var o=e=>!n(e)&&!Array.isArray(e)&&s(e)&&!l(e),d=e=>o(e)&&e.target?a(e.target)?e.target.checked:e.target.value:e,u=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,c=(e,t)=>e.has(u(t)),p=e=>{let t=e.constructor&&e.constructor.prototype;return o(t)&&t.hasOwnProperty("isPrototypeOf")},f="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function E(e){let t;let r=Array.isArray(e),i="undefined"!=typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(!(f&&(e instanceof Blob||i))&&(r||o(e))))return e;else if(t=r?[]:{},r||p(e))for(let r in e)e.hasOwnProperty(r)&&(t[r]=E(e[r]));else t=e;return t}var _=e=>Array.isArray(e)?e.filter(Boolean):[],m=e=>void 0===e,h=(e,t,r)=>{if(!t||!o(e))return r;let i=_(t.split(/[,[\].]+?/)).reduce((e,t)=>n(e)?e:e[t],e);return m(i)||i===e?m(e[t])?r:e[t]:i},I=e=>"boolean"==typeof e,T=e=>/^\w*$/.test(e),g=e=>_(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y=(e,t,r)=>{let i=-1,a=T(t)?[t]:g(t),l=a.length,n=l-1;for(;++i<l;){let t=a[i],l=r;if(i!==n){let r=e[t];l=o(r)||Array.isArray(r)?r:isNaN(+a[i+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=l,e=e[t]}return e};let R={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},A={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},O={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},D=i.createContext(null),S=()=>i.useContext(D),v=e=>{let{children:t,...r}=e;return i.createElement(D.Provider,{value:r},t)};var w=(e,t,r,i=!0)=>{let a={defaultValues:t._defaultValues};for(let l in e)Object.defineProperty(a,l,{get:()=>(t._proxyFormState[l]!==A.all&&(t._proxyFormState[l]=!i||A.all),r&&(r[l]=!0),e[l])});return a},b=e=>o(e)&&!Object.keys(e).length,M=(e,t,r,i)=>{r(e);let{name:a,...l}=e;return b(l)||Object.keys(l).length>=Object.keys(t).length||Object.keys(l).find(e=>t[e]===(!i||A.all))},L=e=>Array.isArray(e)?e:[e],P=(e,t,r)=>!e||!t||e===t||L(e).some(e=>e&&(r?e===t:e.startsWith(t)||t.startsWith(e)));function C(e){let t=i.useRef(e);t.current=e,i.useEffect(()=>{let r=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}var N=e=>"string"==typeof e,G=(e,t,r,i,a)=>N(e)?(i&&t.watch.add(e),h(r,e,a)):Array.isArray(e)?e.map(e=>(i&&t.watch.add(e),h(r,e))):(i&&(t.watchAll=!0),r);let x=e=>e.render(function(e){let t=S(),{name:r,disabled:a,control:l=t.control,shouldUnregister:n}=e,s=c(l._names.array,r),o=function(e){let t=S(),{control:r=t.control,name:a,defaultValue:l,disabled:n,exact:s}=e||{},o=i.useRef(a);o.current=a,C({disabled:n,subject:r._subjects.values,next:e=>{P(o.current,e.name,s)&&u(E(G(o.current,r._names,e.values||r._formValues,!1,l)))}});let[d,u]=i.useState(r._getWatch(a,l));return i.useEffect(()=>r._removeUnmounted()),d}({control:l,name:r,defaultValue:h(l._formValues,r,h(l._defaultValues,r,e.defaultValue)),exact:!0}),u=function(e){let t=S(),{control:r=t.control,disabled:a,name:l,exact:n}=e||{},[s,o]=i.useState(r._formState),d=i.useRef(!0),u=i.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),c=i.useRef(l);return c.current=l,C({disabled:a,next:e=>d.current&&P(c.current,e.name,n)&&M(e,u.current,r._updateFormState)&&o({...r._formState,...e}),subject:r._subjects.state}),i.useEffect(()=>(d.current=!0,u.current.isValid&&r._updateValid(!0),()=>{d.current=!1}),[r]),i.useMemo(()=>w(s,r,u.current,!1),[s,r])}({control:l,name:r,exact:!0}),p=i.useRef(l.register(r,{...e.rules,value:o,...I(e.disabled)?{disabled:e.disabled}:{}})),f=i.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!h(u.errors,r)},isDirty:{enumerable:!0,get:()=>!!h(u.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!h(u.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!h(u.validatingFields,r)},error:{enumerable:!0,get:()=>h(u.errors,r)}}),[u,r]),_=i.useMemo(()=>({name:r,value:o,...I(a)||u.disabled?{disabled:u.disabled||a}:{},onChange:e=>p.current.onChange({target:{value:d(e),name:r},type:R.CHANGE}),onBlur:()=>p.current.onBlur({target:{value:h(l._formValues,r),name:r},type:R.BLUR}),ref:e=>{let t=h(l._fields,r);t&&e&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}}),[r,l._formValues,a,u.disabled,o,l._fields]);return i.useEffect(()=>{let e=l._options.shouldUnregister||n,t=(e,t)=>{let r=h(l._fields,e);r&&r._f&&(r._f.mount=t)};if(t(r,!0),e){let e=E(h(l._options.defaultValues,r));y(l._defaultValues,r,e),m(h(l._formValues,r))&&y(l._formValues,r,e)}return s||l.register(r),()=>{(s?e&&!l._state.action:e)?l.unregister(r):t(r,!1)}},[r,l,s,n]),i.useEffect(()=>{l._updateDisabledField({disabled:a,fields:l._fields,name:r})},[a,r,l]),i.useMemo(()=>({field:_,formState:u,fieldState:f}),[_,u,f])}(e));var V=(e,t,r,i,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[i]:a||!0}}:{},U=()=>{let e="undefined"==typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let r=(16*Math.random()+e)%16|0;return("x"==t?r:3&r|8).toString(16)})},F=(e,t,r={})=>r.shouldFocus||m(r.shouldFocus)?r.focusName||`${e}.${m(r.focusIndex)?t:r.focusIndex}.`:"",B=e=>({isOnSubmit:!e||e===A.onSubmit,isOnBlur:e===A.onBlur,isOnChange:e===A.onChange,isOnAll:e===A.all,isOnTouch:e===A.onTouched}),k=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));let q=(e,t,r,i)=>{for(let a of r||Object.keys(e)){let r=h(e,a);if(r){let{_f:e,...l}=r;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],a)&&!i||e.ref&&t(e.ref,e.name)&&!i)return!0;if(q(l,t))break}else if(o(l)&&q(l,t))break}}};var Y=(e,t,r)=>{let i=L(h(e,r));return y(i,"root",t[r]),y(e,r,i),e},W=e=>"file"===e.type,H=e=>"function"==typeof e,X=e=>{if(!f)return!1;let t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},$=e=>N(e),j=e=>"radio"===e.type,z=e=>e instanceof RegExp;let Q={value:!1,isValid:!1},Z={value:!0,isValid:!0};var K=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!m(e[0].attributes.value)?m(e[0].value)||""===e[0].value?Z:{value:e[0].value,isValid:!0}:Z:Q}return Q};let J={isValid:!1,value:null};var ee=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,J):J;function et(e,t,r="validate"){if($(e)||Array.isArray(e)&&e.every($)||I(e)&&!e)return{type:r,message:$(e)?e:"",ref:t}}var er=e=>o(e)&&!z(e)?e:{value:e,message:""},ei=async(e,t,r,i,l,s)=>{let{ref:d,refs:u,required:c,maxLength:p,minLength:f,min:E,max:_,pattern:T,validate:g,name:y,valueAsNumber:R,mount:A}=e._f,D=h(r,y);if(!A||t.has(y))return{};let S=u?u[0]:d,v=e=>{l&&S.reportValidity&&(S.setCustomValidity(I(e)?"":e||""),S.reportValidity())},w={},M=j(d),L=a(d),P=(R||W(d))&&m(d.value)&&m(D)||X(d)&&""===d.value||""===D||Array.isArray(D)&&!D.length,C=V.bind(null,y,i,w),G=(e,t,r,i=O.maxLength,a=O.minLength)=>{let l=e?t:r;w[y]={type:e?i:a,message:l,ref:d,...C(e?i:a,l)}};if(s?!Array.isArray(D)||!D.length:c&&(!(M||L)&&(P||n(D))||I(D)&&!D||L&&!K(u).isValid||M&&!ee(u).isValid)){let{value:e,message:t}=$(c)?{value:!!c,message:c}:er(c);if(e&&(w[y]={type:O.required,message:t,ref:S,...C(O.required,t)},!i))return v(t),w}if(!P&&(!n(E)||!n(_))){let e,t;let r=er(_),a=er(E);if(n(D)||isNaN(D)){let i=d.valueAsDate||new Date(D),l=e=>new Date(new Date().toDateString()+" "+e),n="time"==d.type,s="week"==d.type;N(r.value)&&D&&(e=n?l(D)>l(r.value):s?D>r.value:i>new Date(r.value)),N(a.value)&&D&&(t=n?l(D)<l(a.value):s?D<a.value:i<new Date(a.value))}else{let i=d.valueAsNumber||(D?+D:D);n(r.value)||(e=i>r.value),n(a.value)||(t=i<a.value)}if((e||t)&&(G(!!e,r.message,a.message,O.max,O.min),!i))return v(w[y].message),w}if((p||f)&&!P&&(N(D)||s&&Array.isArray(D))){let e=er(p),t=er(f),r=!n(e.value)&&D.length>+e.value,a=!n(t.value)&&D.length<+t.value;if((r||a)&&(G(r,e.message,t.message),!i))return v(w[y].message),w}if(T&&!P&&N(D)){let{value:e,message:t}=er(T);if(z(e)&&!D.match(e)&&(w[y]={type:O.pattern,message:t,ref:d,...C(O.pattern,t)},!i))return v(t),w}if(g){if(H(g)){let e=et(await g(D,r),S);if(e&&(w[y]={...e,...C(O.validate,e.message)},!i))return v(e.message),w}else if(o(g)){let e={};for(let t in g){if(!b(e)&&!i)break;let a=et(await g[t](D,r),S,t);a&&(e={...a,...C(t,a.message)},v(a.message),i&&(w[y]=e))}if(!b(e)&&(w[y]={ref:S,...e},!i))return w}}return v(!0),w},ea=(e,t)=>[...e,...L(t)],el=e=>Array.isArray(e)?e.map(()=>void 0):void 0;function en(e,t,r){return[...e.slice(0,t),...L(r),...e.slice(t)]}var es=(e,t,r)=>Array.isArray(e)?(m(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],eo=(e,t)=>[...L(t),...L(e)],ed=(e,t)=>m(t)?[]:function(e,t){let r=0,i=[...e];for(let e of t)i.splice(e-r,1),r++;return _(i).length?i:[]}(e,L(t).sort((e,t)=>e-t)),eu=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]};function ec(e,t){let r=Array.isArray(t)?t:T(t)?[t]:g(t),i=1===r.length?e:function(e,t){let r=t.slice(0,-1).length,i=0;for(;i<r;)e=m(e)?i++:e[t[i++]];return e}(e,r),a=r.length-1,l=r[a];return i&&delete i[l],0!==a&&(o(i)&&b(i)||Array.isArray(i)&&function(e){for(let t in e)if(e.hasOwnProperty(t)&&!m(e[t]))return!1;return!0}(i))&&ec(e,r.slice(0,-1)),e}var ep=(e,t,r)=>(e[t]=r,e);function ef(e){let t=S(),{control:r=t.control,name:a,keyName:l="id",shouldUnregister:n,rules:s}=e,[o,d]=i.useState(r._getFieldArray(a)),u=i.useRef(r._getFieldArray(a).map(U)),c=i.useRef(o),p=i.useRef(a),f=i.useRef(!1);p.current=a,c.current=o,r._names.array.add(a),s&&r.register(a,s),C({next:({values:e,name:t})=>{if(t===p.current||!t){let t=h(e,p.current);Array.isArray(t)&&(d(t),u.current=t.map(U))}},subject:r._subjects.array});let _=i.useCallback(e=>{f.current=!0,r._updateFieldArray(a,e)},[r,a]);return i.useEffect(()=>{if(r._state.action=!1,k(a,r._names)&&r._subjects.state.next({...r._formState}),f.current&&(!B(r._options.mode).isOnSubmit||r._formState.isSubmitted)){if(r._options.resolver)r._executeSchema([a]).then(e=>{let t=h(e.errors,a),i=h(r._formState.errors,a);(i?!t&&i.type||t&&(i.type!==t.type||i.message!==t.message):t&&t.type)&&(t?y(r._formState.errors,a,t):ec(r._formState.errors,a),r._subjects.state.next({errors:r._formState.errors}))});else{let e=h(r._fields,a);e&&e._f&&!(B(r._options.reValidateMode).isOnSubmit&&B(r._options.mode).isOnSubmit)&&ei(e,r._names.disabled,r._formValues,r._options.criteriaMode===A.all,r._options.shouldUseNativeValidation,!0).then(e=>!b(e)&&r._subjects.state.next({errors:Y(r._formState.errors,e,a)}))}}r._subjects.values.next({name:a,values:{...r._formValues}}),r._names.focus&&q(r._fields,(e,t)=>{if(r._names.focus&&t.startsWith(r._names.focus)&&e.focus)return e.focus(),1}),r._names.focus="",r._updateValid(),f.current=!1},[o,a,r]),i.useEffect(()=>(h(r._formValues,a)||r._updateFieldArray(a),()=>{(r._options.shouldUnregister||n)&&r.unregister(a)}),[a,r,l,n]),{swap:i.useCallback((e,t)=>{let i=r._getFieldArray(a);eu(i,e,t),eu(u.current,e,t),_(i),d(i),r._updateFieldArray(a,i,eu,{argA:e,argB:t},!1)},[_,a,r]),move:i.useCallback((e,t)=>{let i=r._getFieldArray(a);es(i,e,t),es(u.current,e,t),_(i),d(i),r._updateFieldArray(a,i,es,{argA:e,argB:t},!1)},[_,a,r]),prepend:i.useCallback((e,t)=>{let i=L(E(e)),l=eo(r._getFieldArray(a),i);r._names.focus=F(a,0,t),u.current=eo(u.current,i.map(U)),_(l),d(l),r._updateFieldArray(a,l,eo,{argA:el(e)})},[_,a,r]),append:i.useCallback((e,t)=>{let i=L(E(e)),l=ea(r._getFieldArray(a),i);r._names.focus=F(a,l.length-1,t),u.current=ea(u.current,i.map(U)),_(l),d(l),r._updateFieldArray(a,l,ea,{argA:el(e)})},[_,a,r]),remove:i.useCallback(e=>{let t=ed(r._getFieldArray(a),e);u.current=ed(u.current,e),_(t),d(t),Array.isArray(h(r._fields,a))||y(r._fields,a,void 0),r._updateFieldArray(a,t,ed,{argA:e})},[_,a,r]),insert:i.useCallback((e,t,i)=>{let l=L(E(t)),n=en(r._getFieldArray(a),e,l);r._names.focus=F(a,e,i),u.current=en(u.current,e,l.map(U)),_(n),d(n),r._updateFieldArray(a,n,en,{argA:e,argB:el(t)})},[_,a,r]),update:i.useCallback((e,t)=>{let i=E(t),l=ep(r._getFieldArray(a),e,i);u.current=[...l].map((t,r)=>t&&r!==e?u.current[r]:U()),_(l),d([...l]),r._updateFieldArray(a,l,ep,{argA:e,argB:i},!0,!1)},[_,a,r]),replace:i.useCallback(e=>{let t=L(E(e));u.current=t.map(U),_([...t]),d([...t]),r._updateFieldArray(a,[...t],e=>e,{},!0,!1)},[_,a,r]),fields:i.useMemo(()=>o.map((e,t)=>({...e,[l]:u.current[t]||U()})),[o,l])}}var eE=()=>{let e=[];return{get observers(){return e},next:t=>{for(let r of e)r.next&&r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}},e_=e=>n(e)||!s(e);function em(e,t){if(e_(e)||e_(t))return e===t;if(l(e)&&l(t))return e.getTime()===t.getTime();let r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(let a of r){let r=e[a];if(!i.includes(a))return!1;if("ref"!==a){let e=t[a];if(l(r)&&l(e)||o(r)&&o(e)||Array.isArray(r)&&Array.isArray(e)?!em(r,e):r!==e)return!1}}return!0}var eh=e=>"select-multiple"===e.type,eI=e=>j(e)||a(e),eT=e=>X(e)&&e.isConnected,eg=e=>{for(let t in e)if(H(e[t]))return!0;return!1};function ey(e,t={}){let r=Array.isArray(e);if(o(e)||r)for(let r in e)Array.isArray(e[r])||o(e[r])&&!eg(e[r])?(t[r]=Array.isArray(e[r])?[]:{},ey(e[r],t[r])):n(e[r])||(t[r]=!0);return t}var eR=(e,t)=>(function e(t,r,i){let a=Array.isArray(t);if(o(t)||a)for(let a in t)Array.isArray(t[a])||o(t[a])&&!eg(t[a])?m(r)||e_(i[a])?i[a]=Array.isArray(t[a])?ey(t[a],[]):{...ey(t[a])}:e(t[a],n(r)?{}:r[a],i[a]):i[a]=!em(t[a],r[a]);return i})(e,t,ey(t)),eA=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:i})=>m(e)?e:t?""===e?NaN:e?+e:e:r&&N(e)?new Date(e):i?i(e):e;function eO(e){let t=e.ref;return W(t)?t.files:j(t)?ee(e.refs).value:eh(t)?[...t.selectedOptions].map(({value:e})=>e):a(t)?K(e.refs).value:eA(m(t.value)?e.ref.value:t.value,e)}var eD=(e,t,r,i)=>{let a={};for(let r of e){let e=h(t,r);e&&y(a,r,e._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:i}},eS=e=>m(e)?e:z(e)?e.source:o(e)?z(e.value)?e.value.source:e.value:e;let ev="AsyncFunction";var ew=e=>!!e&&!!e.validate&&!!(H(e.validate)&&e.validate.constructor.name===ev||o(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===ev)),eb=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function eM(e,t,r){let i=h(e,r);if(i||T(r))return{error:i,name:r};let a=r.split(".");for(;a.length;){let i=a.join("."),l=h(t,i),n=h(e,i);if(l&&!Array.isArray(l)&&r!==i)break;if(n&&n.type)return{name:i,error:n};a.pop()}return{name:r}}var eL=(e,t,r,i,a)=>!a.isOnAll&&(!r&&a.isOnTouch?!(t||e):(r?i.isOnBlur:a.isOnBlur)?!e:(r?!i.isOnChange:!a.isOnChange)||e),eP=(e,t)=>!_(h(e,t)).length&&ec(e,t);let eC={mode:A.onSubmit,reValidateMode:A.onChange,shouldFocusError:!0};function eN(e={}){let t=i.useRef(void 0),r=i.useRef(void 0),[s,u]=i.useState({isDirty:!1,isValidating:!1,isLoading:H(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:H(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...function(e={}){let t,r={...eC,...e},i={submitCount:0,isDirty:!1,isLoading:H(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},s={},u=(o(r.defaultValues)||o(r.values))&&E(r.defaultValues||r.values)||{},p=r.shouldUnregister?{}:E(u),T={action:!1,mount:!1,watch:!1},g={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},O=0,D={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},S={values:eE(),array:eE(),state:eE()},v=B(r.mode),w=B(r.reValidateMode),M=r.criteriaMode===A.all,P=e=>t=>{clearTimeout(O),O=setTimeout(e,t)},C=async e=>{if(!r.disabled&&(D.isValid||e)){let e=r.resolver?b((await j()).errors):await Q(s,!0);e!==i.isValid&&S.state.next({isValid:e})}},x=(e,t)=>{!r.disabled&&(D.isValidating||D.validatingFields)&&((e||Array.from(g.mount)).forEach(e=>{e&&(t?y(i.validatingFields,e,t):ec(i.validatingFields,e))}),S.state.next({validatingFields:i.validatingFields,isValidating:!b(i.validatingFields)}))},V=(e,t)=>{y(i.errors,e,t),S.state.next({errors:i.errors})},U=(e,t,r,i)=>{let a=h(s,e);if(a){let l=h(p,e,m(r)?h(u,e):r);m(l)||i&&i.defaultChecked||t?y(p,e,t?l:eO(a._f)):J(e,l),T.mount&&C()}},F=(e,t,a,l,n)=>{let o=!1,d=!1,c={name:e};if(!r.disabled){let r=!!(h(s,e)&&h(s,e)._f&&h(s,e)._f.disabled);if(!a||l){D.isDirty&&(d=i.isDirty,i.isDirty=c.isDirty=Z(),o=d!==c.isDirty);let a=r||em(h(u,e),t);d=!!(!r&&h(i.dirtyFields,e)),a||r?ec(i.dirtyFields,e):y(i.dirtyFields,e,!0),c.dirtyFields=i.dirtyFields,o=o||D.dirtyFields&&!a!==d}if(a){let t=h(i.touchedFields,e);t||(y(i.touchedFields,e,a),c.touchedFields=i.touchedFields,o=o||D.touchedFields&&t!==a)}o&&n&&S.state.next(c)}return o?c:{}},$=(e,a,l,n)=>{let s=h(i.errors,e),o=D.isValid&&I(a)&&i.isValid!==a;if(r.delayError&&l?(t=P(()=>V(e,l)))(r.delayError):(clearTimeout(O),t=null,l?y(i.errors,e,l):ec(i.errors,e)),(l?!em(s,l):s)||!b(n)||o){let t={...n,...o&&I(a)?{isValid:a}:{},errors:i.errors,name:e};i={...i,...t},S.state.next(t)}},j=async e=>{x(e,!0);let t=await r.resolver(p,r.context,eD(e||g.mount,s,r.criteriaMode,r.shouldUseNativeValidation));return x(e),t},z=async e=>{let{errors:t}=await j(e);if(e)for(let r of e){let e=h(t,r);e?y(i.errors,r,e):ec(i.errors,r)}else i.errors=t;return t},Q=async(e,t,a={valid:!0})=>{for(let l in e){let n=e[l];if(n){let{_f:e,...s}=n;if(e){let s=g.array.has(e.name),o=n._f&&ew(n._f);o&&D.validatingFields&&x([l],!0);let d=await ei(n,g.disabled,p,M,r.shouldUseNativeValidation&&!t,s);if(o&&D.validatingFields&&x([l]),d[e.name]&&(a.valid=!1,t))break;t||(h(d,e.name)?s?Y(i.errors,d,e.name):y(i.errors,e.name,d[e.name]):ec(i.errors,e.name))}b(s)||await Q(s,t,a)}}return a.valid},Z=(e,t)=>!r.disabled&&(e&&t&&y(p,e,t),!em(en(),u)),K=(e,t,r)=>G(e,g,{...T.mount?p:m(t)?u:N(e)?{[e]:t}:t},r,t),J=(e,t,r={})=>{let i=h(s,e),l=t;if(i){let r=i._f;r&&(r.disabled||y(p,e,eA(t,r)),l=X(r.ref)&&n(t)?"":t,eh(r.ref)?[...r.ref.options].forEach(e=>e.selected=l.includes(e.value)):r.refs?a(r.ref)?r.refs.length>1?r.refs.forEach(e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(l)?!!l.find(t=>t===e.value):l===e.value)):r.refs[0]&&(r.refs[0].checked=!!l):r.refs.forEach(e=>e.checked=e.value===l):W(r.ref)?r.ref.value="":(r.ref.value=l,r.ref.type||S.values.next({name:e,values:{...p}})))}(r.shouldDirty||r.shouldTouch)&&F(e,l,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&el(e)},ee=(e,t,r)=>{for(let i in t){let a=t[i],n=`${e}.${i}`,d=h(s,n);(g.array.has(e)||o(a)||d&&!d._f)&&!l(a)?ee(n,a,r):J(n,a,r)}},et=(e,t,r={})=>{let a=h(s,e),l=g.array.has(e),o=E(t);y(p,e,o),l?(S.array.next({name:e,values:{...p}}),(D.isDirty||D.dirtyFields)&&r.shouldDirty&&S.state.next({name:e,dirtyFields:eR(u,p),isDirty:Z(e,o)})):!a||a._f||n(o)?J(e,o,r):ee(e,o,r),k(e,g)&&S.state.next({...i}),S.values.next({name:T.mount?e:void 0,values:{...p}})},er=async e=>{T.mount=!0;let a=e.target,n=a.name,o=!0,u=h(s,n),c=e=>{o=Number.isNaN(e)||l(e)&&isNaN(e.getTime())||em(e,h(p,n,e))};if(u){let l,f;let E=a.type?eO(u._f):d(e),_=e.type===R.BLUR||e.type===R.FOCUS_OUT,m=!eb(u._f)&&!r.resolver&&!h(i.errors,n)&&!u._f.deps||eL(_,h(i.touchedFields,n),i.isSubmitted,w,v),I=k(n,g,_);y(p,n,E),_?(u._f.onBlur&&u._f.onBlur(e),t&&t(0)):u._f.onChange&&u._f.onChange(e);let T=F(n,E,_,!1),A=!b(T)||I;if(_||S.values.next({name:n,type:e.type,values:{...p}}),m)return D.isValid&&("onBlur"===r.mode&&_?C():_||C()),A&&S.state.next({name:n,...I?{}:T});if(!_&&I&&S.state.next({...i}),r.resolver){let{errors:e}=await j([n]);if(c(E),o){let t=eM(i.errors,s,n),r=eM(e,s,t.name||n);l=r.error,n=r.name,f=b(e)}}else x([n],!0),l=(await ei(u,g.disabled,p,M,r.shouldUseNativeValidation))[n],x([n]),c(E),o&&(l?f=!1:D.isValid&&(f=await Q(s,!0)));o&&(u._f.deps&&el(u._f.deps),$(n,f,l,T))}},ea=(e,t)=>{if(h(i.errors,t)&&e.focus)return e.focus(),1},el=async(e,t={})=>{let a,l;let n=L(e);if(r.resolver){let t=await z(m(e)?e:n);a=b(t),l=e?!n.some(e=>h(t,e)):a}else e?((l=(await Promise.all(n.map(async e=>{let t=h(s,e);return await Q(t&&t._f?{[e]:t}:t)}))).every(Boolean))||i.isValid)&&C():l=a=await Q(s);return S.state.next({...!N(e)||D.isValid&&a!==i.isValid?{}:{name:e},...r.resolver||!e?{isValid:a}:{},errors:i.errors}),t.shouldFocus&&!l&&q(s,ea,e?n:g.mount),l},en=e=>{let t={...T.mount?p:u};return m(e)?t:N(e)?h(t,e):e.map(e=>h(t,e))},es=(e,t)=>({invalid:!!h((t||i).errors,e),isDirty:!!h((t||i).dirtyFields,e),error:h((t||i).errors,e),isValidating:!!h(i.validatingFields,e),isTouched:!!h((t||i).touchedFields,e)}),eo=(e,t,r)=>{let a=(h(s,e,{_f:{}})._f||{}).ref,{ref:l,message:n,type:o,...d}=h(i.errors,e)||{};y(i.errors,e,{...d,...t,ref:a}),S.state.next({name:e,errors:i.errors,isValid:!1}),r&&r.shouldFocus&&a&&a.focus&&a.focus()},ed=(e,t={})=>{for(let a of e?L(e):g.mount)g.mount.delete(a),g.array.delete(a),t.keepValue||(ec(s,a),ec(p,a)),t.keepError||ec(i.errors,a),t.keepDirty||ec(i.dirtyFields,a),t.keepTouched||ec(i.touchedFields,a),t.keepIsValidating||ec(i.validatingFields,a),r.shouldUnregister||t.keepDefaultValue||ec(u,a);S.values.next({values:{...p}}),S.state.next({...i,...t.keepDirty?{isDirty:Z()}:{}}),t.keepIsValid||C()},eu=({disabled:e,name:t,field:r,fields:i})=>{(I(e)&&T.mount||e||g.disabled.has(t))&&(e?g.disabled.add(t):g.disabled.delete(t),F(t,eO(r?r._f:h(i,t)._f),!1,!1,!0))},ep=(e,t={})=>{let i=h(s,e),a=I(t.disabled)||I(r.disabled);return y(s,e,{...i||{},_f:{...i&&i._f?i._f:{ref:{name:e}},name:e,mount:!0,...t}}),g.mount.add(e),i?eu({field:i,disabled:I(t.disabled)?t.disabled:r.disabled,name:e}):U(e,!0,t.value),{...a?{disabled:t.disabled||r.disabled}:{},...r.progressive?{required:!!t.required,min:eS(t.min),max:eS(t.max),minLength:eS(t.minLength),maxLength:eS(t.maxLength),pattern:eS(t.pattern)}:{},name:e,onChange:er,onBlur:er,ref:a=>{if(a){ep(e,t),i=h(s,e);let r=m(a.value)&&a.querySelectorAll&&a.querySelectorAll("input,select,textarea")[0]||a,l=eI(r),n=i._f.refs||[];(l?n.find(e=>e===r):r===i._f.ref)||(y(s,e,{_f:{...i._f,...l?{refs:[...n.filter(eT),r,...Array.isArray(h(u,e))?[{}]:[]],ref:{type:r.type,name:e}}:{ref:r}}}),U(e,!1,void 0,r))}else(i=h(s,e,{}))._f&&(i._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&!(c(g.array,e)&&T.action)&&g.unMount.add(e)}}},ef=()=>r.shouldFocusError&&q(s,ea,g.mount),e_=(e,t)=>async a=>{let l;a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let n=E(p);if(g.disabled.size)for(let e of g.disabled)y(n,e,void 0);if(S.state.next({isSubmitting:!0}),r.resolver){let{errors:e,values:t}=await j();i.errors=e,n=t}else await Q(s);if(ec(i.errors,"root"),b(i.errors)){S.state.next({errors:{}});try{await e(n,a)}catch(e){l=e}}else t&&await t({...i.errors},a),ef(),setTimeout(ef);if(S.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:b(i.errors)&&!l,submitCount:i.submitCount+1,errors:i.errors}),l)throw l},eg=(e,t={})=>{let a=e?E(e):u,l=E(a),n=b(e),o=n?u:l;if(t.keepDefaultValues||(u=a),!t.keepValues){if(t.keepDirtyValues)for(let e of Array.from(new Set([...g.mount,...Object.keys(eR(u,p))])))h(i.dirtyFields,e)?y(o,e,h(p,e)):et(e,h(o,e));else{if(f&&m(e))for(let e of g.mount){let t=h(s,e);if(t&&t._f){let e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(X(e)){let t=e.closest("form");if(t){t.reset();break}}}}s={}}p=r.shouldUnregister?t.keepDefaultValues?E(u):{}:E(o),S.array.next({values:{...o}}),S.values.next({values:{...o}})}g={mount:t.keepDirtyValues?g.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},T.mount=!D.isValid||!!t.keepIsValid||!!t.keepDirtyValues,T.watch=!!r.shouldUnregister,S.state.next({submitCount:t.keepSubmitCount?i.submitCount:0,isDirty:!n&&(t.keepDirty?i.isDirty:!!(t.keepDefaultValues&&!em(e,u))),isSubmitted:!!t.keepIsSubmitted&&i.isSubmitted,dirtyFields:n?{}:t.keepDirtyValues?t.keepDefaultValues&&p?eR(u,p):i.dirtyFields:t.keepDefaultValues&&e?eR(u,e):t.keepDirty?i.dirtyFields:{},touchedFields:t.keepTouched?i.touchedFields:{},errors:t.keepErrors?i.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&i.isSubmitSuccessful,isSubmitting:!1})},ey=(e,t)=>eg(H(e)?e(p):e,t);return{control:{register:ep,unregister:ed,getFieldState:es,handleSubmit:e_,setError:eo,_executeSchema:j,_getWatch:K,_getDirty:Z,_updateValid:C,_removeUnmounted:()=>{for(let e of g.unMount){let t=h(s,e);t&&(t._f.refs?t._f.refs.every(e=>!eT(e)):!eT(t._f.ref))&&ed(e)}g.unMount=new Set},_updateFieldArray:(e,t=[],a,l,n=!0,o=!0)=>{if(l&&a&&!r.disabled){if(T.action=!0,o&&Array.isArray(h(s,e))){let t=a(h(s,e),l.argA,l.argB);n&&y(s,e,t)}if(o&&Array.isArray(h(i.errors,e))){let t=a(h(i.errors,e),l.argA,l.argB);n&&y(i.errors,e,t),eP(i.errors,e)}if(D.touchedFields&&o&&Array.isArray(h(i.touchedFields,e))){let t=a(h(i.touchedFields,e),l.argA,l.argB);n&&y(i.touchedFields,e,t)}D.dirtyFields&&(i.dirtyFields=eR(u,p)),S.state.next({name:e,isDirty:Z(e,t),dirtyFields:i.dirtyFields,errors:i.errors,isValid:i.isValid})}else y(p,e,t)},_updateDisabledField:eu,_getFieldArray:e=>_(h(T.mount?p:u,e,r.shouldUnregister?h(u,e,[]):[])),_reset:eg,_resetDefaultValues:()=>H(r.defaultValues)&&r.defaultValues().then(e=>{ey(e,r.resetOptions),S.state.next({isLoading:!1})}),_updateFormState:e=>{i={...i,...e}},_disableForm:e=>{I(e)&&(S.state.next({disabled:e}),q(s,(t,r)=>{let i=h(s,r);i&&(t.disabled=i._f.disabled||e,Array.isArray(i._f.refs)&&i._f.refs.forEach(t=>{t.disabled=i._f.disabled||e}))},0,!1))},_subjects:S,_proxyFormState:D,_setErrors:e=>{i.errors=e,S.state.next({errors:i.errors,isValid:!1})},get _fields(){return s},get _formValues(){return p},get _state(){return T},set _state(value){T=value},get _defaultValues(){return u},get _names(){return g},set _names(value){g=value},get _formState(){return i},set _formState(value){i=value},get _options(){return r},set _options(value){r={...r,...value}}},trigger:el,register:ep,handleSubmit:e_,watch:(e,t)=>H(e)?S.values.subscribe({next:r=>e(K(void 0,t),r)}):K(e,t,!0),setValue:et,getValues:en,reset:ey,resetField:(e,t={})=>{h(s,e)&&(m(t.defaultValue)?et(e,E(h(u,e))):(et(e,t.defaultValue),y(u,e,E(t.defaultValue))),t.keepTouched||ec(i.touchedFields,e),t.keepDirty||(ec(i.dirtyFields,e),i.isDirty=t.defaultValue?Z(e,E(h(u,e))):Z()),!t.keepError&&(ec(i.errors,e),D.isValid&&C()),S.state.next({...i}))},clearErrors:e=>{e&&L(e).forEach(e=>ec(i.errors,e)),S.state.next({errors:e?i.errors:{}})},unregister:ed,setError:eo,setFocus:(e,t={})=>{let r=h(s,e),i=r&&r._f;if(i){let e=i.refs?i.refs[0]:i.ref;e.focus&&(e.focus(),t.shouldSelect&&H(e.select)&&e.select())}},getFieldState:es}}(e),formState:s});let p=t.current.control;return p._options=e,C({subject:p._subjects.state,next:e=>{M(e,p._proxyFormState,p._updateFormState,!0)&&u({...p._formState})}}),i.useEffect(()=>p._disableForm(e.disabled),[p,e.disabled]),i.useEffect(()=>{if(p._proxyFormState.isDirty){let e=p._getDirty();e!==s.isDirty&&p._subjects.state.next({isDirty:e})}},[p,s.isDirty]),i.useEffect(()=>{e.values&&!em(e.values,r.current)?(p._reset(e.values,p._options.resetOptions),r.current=e.values,u(e=>({...e}))):p._resetDefaultValues()},[e.values,p]),i.useEffect(()=>{e.errors&&p._setErrors(e.errors)},[e.errors,p]),i.useEffect(()=>{p._state.mount||(p._updateValid(),p._state.mount=!0),p._state.watch&&(p._state.watch=!1,p._subjects.state.next({...p._formState})),p._removeUnmounted()}),i.useEffect(()=>{e.shouldUnregister&&p._subjects.values.next({values:p._getWatch()})},[e.shouldUnregister,p]),t.current.formState=w(s,p),t.current}}};